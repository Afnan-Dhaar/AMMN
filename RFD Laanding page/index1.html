<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Insurance Carousel - Enhanced</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #f5f5f5;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .insurance-section {
            width: 100%;
            
        }

        .section-header {
            margin-bottom: 50px;
        }

        .section-header h1 {
            font-size: 42px;
            font-weight: 400;
            color: #1a1a1a;
            margin-bottom: 8px;
            letter-spacing: -0.5px;
        }

        .section-header p {
            font-size: 16px;
            color: #666;
            font-weight: 400;
        }

        .carousel-wrapper {
            position: relative;
            overflow: hidden;
            padding: 20px 0;
            height: 65vh;
        }

        .carousel-container {
            display: flex;
            gap: 20px;
            transition: transform 0.7s cubic-bezier(0.4, 0, 0.2, 1);
            align-items: center;
            padding-left: 50px;
        }

        .carousel-slide {
            position: relative;
            border-radius: 20px;
            overflow: hidden;
            flex-shrink: 0;
            width: 350px;
            height: 60vh;
            transition: all 0.7s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
            cursor: pointer;
            opacity: 0;
            transform: scale(0.9);
            visibility: hidden;
        }

        .carousel-slide.active {
            opacity: 1;
            cursor: default;
            transform: scale(1);
            width: 80vw;
            visibility: visible;
        }

        .carousel-slide.next-active {
            opacity: 1;
            transform: scale(1);
            cursor: pointer;
            visibility: visible; 
        }

        .slide-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .slide-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.6) 0%, transparent 50%);
        }

        .slide-title {
            position: absolute;
            bottom: 30px;
            left: 30px;
            font-size: 28px;
            font-weight: 600;
            color: #ffffff;
            z-index: 2;
        }

        /* Fixed Info Box */
        .info-box-container {
            position: absolute;
            top: 50%;
            right: 80px;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: 16px;
            width: 320px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            z-index: 100;
        }

        .info-box-content {
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .info-box-content.fade-out {
            opacity: 0;
            transform: translateY(10px);
        }

        .info-box-container h3 {
            font-size: 22px;
            font-weight: 600;
            color: #1a1a1a;
            margin-bottom: 12px;
        }

        .info-box-container p {
            font-size: 14px;
            color: #666;
            line-height: 1.6;
            margin-bottom: 24px;
        }

        .slide-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .btn {
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 500;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .btn-primary {
            background: #0066ff;
            color: white;
        }

        .btn-primary:hover {
            background: #0052cc;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 102, 255, 0.3);
        }

        .btn-secondary {
            background: #00cc66;
            color: white;
        }

        .btn-secondary:hover {
            background: #00b359;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 204, 102, 0.3);
        }

        .slide-navigation {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }

        .nav-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(0, 102, 255, 0.1);
            border: none;
            color: #0066ff;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .nav-btn:hover {
            background: rgba(0, 102, 255, 0.2);
            transform: scale(1.1);
        }

        .nav-btn svg {
            width: 20px;
            height: 20px;
        }

        .carousel-dots {
            display: flex;
            gap: 6px;
            align-items: center;
        }

        .dot {
            height: 3px;
            border-radius: 2px;
            background: rgba(0, 0, 0, 0.2);
            cursor: pointer;
            transition: all 0.3s ease;
            width: 20px;
        }

        .dot.active {
            width: 30px;
            background: #0066ff;
        }

        @media (max-width: 1200px) {
            .carousel-slide {
                width: 300px;
            }

            .carousel-slide.active {
                width: 500px;
            }

            .info-box-container {
                width: 280px;
                padding: 24px;
                right: 40px;
            }
        }

        @media (max-width: 768px) {
            .section-header h1 {
                font-size: 32px;
            }

            .carousel-slide {
                width: 250px;
                height: 400px;
            }

            .carousel-slide.active {
                width: 300px;
            }

            .info-box-container {
                width: 90%;
                right: 5%;
                padding: 20px;
                top: auto;
                bottom: 20px;
                transform: none;
            }

            .carousel-wrapper {
                height: auto;
                min-height: 500px;
            }
        }
    </style>
</head>
<body>
    <div class="insurance-section">
        <div class="section-header">
            <h1>Protection for Every Part of Life.</h1>
            <p>A wide range of insurance products designed to keep you secure in every situation.</p>
        </div>

        <div class="carousel-wrapper">
            <div class="carousel-container" id="carousel">
                <!-- Slides will be inserted here by JavaScript -->
            </div>

            <!-- Fixed Info Box -->
            <div class="info-box-container">
                <div class="info-box-content" id="infoBoxContent">
                    <h3 id="infoTitle">Motor Insurance</h3>
                    <p id="infoDescription">Motor insurance provides essential protection for all motor vehicles, covering repairs, accidents, breakdowns, and unexpected emergencies.</p>
                    <div class="slide-buttons">
                        <button class="btn btn-primary">Buy Now</button>
                        <button class="btn btn-secondary">Explore â†’</button>
                    </div>
                    <div class="slide-navigation">
                        <button class="nav-btn prev-btn" id="prevBtn">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M15 18l-6-6 6-6"/>
                            </svg>
                        </button>
                        <div class="carousel-dots" id="dotsContainer">
                            <!-- Dots will be inserted here -->
                        </div>
                        <button class="nav-btn next-btn" id="nextBtn">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M9 18l6-6-6-6"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const slides = [
            {
                title: 'Motor Insurance',
                description: 'Motor insurance provides essential protection for all motor vehicles, covering repairs, accidents, breakdowns, and unexpected emergencies.',
                image: 'https://images.unsplash.com/photo-1449965408869-eaa3f722e40d?w=1200&q=80',
            },
            {
                title: 'Health Insurance',
                description: 'Comprehensive health coverage for you and your family, including hospitalization, medical treatments, and preventive care services.',
                image: 'https://images.unsplash.com/photo-1631217868264-e5b90bb7e133?w=1200&q=80',
            },
            {
                title: 'Life Insurance',
                description: 'Secure your family\'s future with comprehensive life insurance plans that provide financial protection and peace of mind.',
                image: 'https://images.unsplash.com/photo-1511895426328-dc8714191300?w=1200&q=80',
            },
            {
                title: 'Travel Insurance',
                description: 'Travel with confidence knowing you\'re protected against unexpected events, medical emergencies, and trip cancellations.',
                image: 'https://images.unsplash.com/photo-1488646953014-85cb44e25828?w=1200&q=80',
            },
            {
                title: 'Home Insurance',
                description: 'Protect your most valuable asset with comprehensive home insurance covering property damage, theft, and natural disasters.',
                image: 'https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=1200&q=80',
            }
        ];

        let currentIndex = 0;
        const carousel = document.getElementById('carousel');
        const infoTitle = document.getElementById('infoTitle');
        const infoDescription = document.getElementById('infoDescription');
        const infoBoxContent = document.getElementById('infoBoxContent');
        const dotsContainer = document.getElementById('dotsContainer');

        // Create dots
        function createDots() {
            slides.forEach((_, index) => {
                const dot = document.createElement('div');
                dot.className = `dot ${index === 0 ? 'active' : ''}`;
                dot.dataset.index = index;
                dot.addEventListener('click', () => goToSlide(index));
                dotsContainer.appendChild(dot);
            });
        }

        // Initialize carousel with infinite loop structure
        function initializeCarousel() {
            // Create slides: [last, ...all slides..., first] for infinite loop
            const slidesToRender = [
                slides[slides.length - 1], // Clone of last slide
                ...slides,
                slides[0] // Clone of first slide
            ];

            slidesToRender.forEach((slide, index) => {
                const slideDiv = document.createElement('div');
                slideDiv.className = 'carousel-slide';
                slideDiv.dataset.index = index;
                
                // Mark the first real slide as active and second as next-active
                if (index === 1) {
                    slideDiv.classList.add('active');
                } else if (index === 2) {
                    slideDiv.classList.add('next-active');
                }
                
                slideDiv.innerHTML = `
                    <img src="${slide.image}" alt="${slide.title}" class="slide-image">
                    <div class="slide-overlay"></div>
                    <h2 class="slide-title">${slide.title}</h2>
                `;

                slideDiv.addEventListener('click', () => {
                    // Calculate the real index (accounting for clones)
                    const realIndex = index === 0 ? slides.length - 1 : 
                                     index === slidesToRender.length - 1 ? 0 : 
                                     index - 1;
                    if (realIndex !== currentIndex) {
                        goToSlide(realIndex);
                    }
                });

                carousel.appendChild(slideDiv);
            });

            // Position to show first real slide
            updateCarouselPosition(false);
        }

        function updateCarouselPosition(animate = true) {
            const allSlides = document.querySelectorAll('.carousel-slide');
            const normalWidth = 350;
            const activeWidth = 600;
            const gap = 20;
            
            // Calculate offset to show current active slide and next slide
            // We need to position so active slide is on left, next slide on right
            const offset = (currentIndex + 1) * (normalWidth + gap);
            
            if (!animate) {
                carousel.style.transition = 'none';
            } else {
                carousel.style.transition = 'transform 0.7s cubic-bezier(0.4, 0, 0.2, 1)';
            }
            
            carousel.style.transform = `translateX(-${offset}px)`;
            
            if (!animate) {
                // Force reflow
                carousel.offsetHeight;
                carousel.style.transition = 'transform 0.7s cubic-bezier(0.4, 0, 0.2, 1)';
            }
        }

        function updateSlideClasses() {
            const allSlides = document.querySelectorAll('.carousel-slide');
            const activeSlideIndex = currentIndex + 1; // +1 because of the cloned first slide
            const nextActiveIndex = activeSlideIndex + 1;
            
            allSlides.forEach((slide, index) => {
                slide.classList.remove('active', 'next-active');
                if (index === activeSlideIndex) {
                    slide.classList.add('active');
                } else if (index === nextActiveIndex) {
                    slide.classList.add('next-active');
                }
            });
        }

        function updateInfoBox() {
            // Fade out
            infoBoxContent.classList.add('fade-out');
            
            setTimeout(() => {
                infoTitle.textContent = slides[currentIndex].title;
                infoDescription.textContent = slides[currentIndex].description;
                
                // Fade in
                infoBoxContent.classList.remove('fade-out');
            }, 150);
        }

        function updateDots() {
            const dots = document.querySelectorAll('.dot');
            dots.forEach((dot, index) => {
                dot.classList.toggle('active', index === currentIndex);
            });
        }

        function goToSlide(index) {
            currentIndex = index;
            updateSlideClasses();
            updateCarouselPosition(true);
            updateInfoBox();
            updateDots();
        }

        function nextSlide() {
            const nextIndex = (currentIndex + 1) % slides.length;
            
            if (nextIndex === 0) {
                // Going from last to first - handle infinite loop
                currentIndex = nextIndex;
                updateSlideClasses();
                updateCarouselPosition(true);
                updateInfoBox();
                updateDots();
                
                // After animation, jump to real first slide without animation
                setTimeout(() => {
                    updateCarouselPosition(false);
                }, 700);
            } else {
                goToSlide(nextIndex);
            }
        }

        function prevSlide() {
            const prevIndex = (currentIndex - 1 + slides.length) % slides.length;
            
            if (currentIndex === 0) {
                // Going from first to last - handle infinite loop
                currentIndex = prevIndex;
                updateSlideClasses();
                updateCarouselPosition(true);
                updateInfoBox();
                updateDots();
                
                // After animation, jump to real last slide without animation
                setTimeout(() => {
                    updateCarouselPosition(false);
                }, 700);
            } else {
                goToSlide(prevIndex);
            }
        }

        // Event listeners
        document.getElementById('prevBtn').addEventListener('click', prevSlide);
        document.getElementById('nextBtn').addEventListener('click', nextSlide);

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft') prevSlide();
            if (e.key === 'ArrowRight') nextSlide();
        });

        // Recalculate on window resize
        window.addEventListener('resize', () => {
            updateCarouselPosition(false);
        });

        // Initialize
        createDots();
        initializeCarousel();
    </script>
</body>
</html>