<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AMMAN Motor Insurance</title>
    <style>
        /* Add new styles for the specific requirements */


        /* Tab buttons style - Updated for better visibility */
        .tab-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            border: 1px solid #dfe6e9;
            border-radius: 8px;
            padding: 2px;
            background: #f8f9fa;
        }

        .tab-button {
            flex: 1;
            padding: 10px 0;
            border: none;
            background: transparent;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            color: #636e72;
            transition: all 0.3s;
            text-align: center;
            font-weight: 500;
        }

        .tab-button.active {
            background: white;
            color: #0984e3;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        /* Multi-select dropdown styles - Updated to match image */
        .multi-select-container {
            position: relative;
            margin-top: 10px;
        }

        .multi-select-display {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            min-height: 44px;
            padding: 10px 12px;
            border: 1px solid #dfe6e9;
            border-radius: 8px;
            cursor: pointer;
            background: white;
            align-items: center;
            min-width: 200px;
        }

        .multi-select-display.empty {
            color: #999;
        }

        .selected-tag {
            background: #e3f2fd;
            color: #0984e3;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 5px;
            border: 1px solid #bbdefb;
        }

        .remove-tag {
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            color: #1976d2;
            margin-left: 4px;
        }

        .more-count {
            background: #f5f5f5;
            color: #666;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-style: italic;
        }

        .multi-select-options {
    position: fixed;
    background: white;
    border: 1px solid #dfe6e9;
    border-radius: 8px;
    margin-top: 5px;
    max-height: 300px;
    overflow-y: auto;
    z-index: 2002;
    display: none;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    width: 300px;
}

        .multi-select-options.active {
            display: block;
        }

        .multi-option {
            padding: 12px 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
            border-bottom: 1px solid #f0f0f0;
            transition: background 0.2s;
        }

        .multi-option:last-child {
            border-bottom: none;
        }

        .multi-option:hover {
            background: #f8f9fa;
        }

        .option-checkbox {
            width: 18px;
            height: 18px;
            border-radius: 3px;
            border: 2px solid #ddd;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .option-checkbox.checked {
            background: #0984e3;
            border-color: #0984e3;
            color: white;
        }

        .option-checkbox.checked::after {
            content: 'âœ“';
            font-size: 12px;
            font-weight: bold;
        }

        .option-label {
            font-size: 14px;
            color: #333;
            flex: 1;
        }

        /* Country item styles - Updated to match image */
        .country-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px;
            border: 1px solid #dfe6e9;
            border-radius: 8px;
            margin-bottom: 10px;
            background: white;
        }

        .country-info {
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 1;
        }

        .country-name {
            font-size: 14px;
            color: #2d3436;
            min-width: 100px;
        }

        .country-years {
            font-size: 14px;
            color: #0984e3;
            font-weight: 500;
            min-width: 30px;
            text-align: center;
        }

        .country-stepper {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .country-stepper-btn {
            width: 28px;
            height: 28px;
            border: 1px solid #0984e3;
            background: white;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: #0984e3;
            transition: all 0.2s;
        }

        .country-stepper-btn:hover {
            background: #0984e3;
            color: white;
        }

        .country-remove {
            background: none;
            border: none;
            color: #ff6b6b;
            cursor: pointer;
            font-size: 18px;
            padding: 5px;
            transition: all 0.2s;
            margin-left: 10px;
        }

        .country-remove:hover {
            color: #ff5252;
            transform: scale(1.1);
        }

        .add-country-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            padding: 12px;
            border: 2px dashed #b2bec3;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            color: #0984e3;
            transition: all 0.2s;
            margin-top: 10px;
            font-weight: 500;
        }

        .add-country-btn:hover {
            border-color: #0984e3;
            background: #f8fffe;
        }

        /* Driver card styles - Updated to match image */
        .driver-card {
    border: 2px solid #dfe6e9;
    border-radius: 12px;
    padding: 20px;
    background: white;
    position: relative;
    overflow: hidden;
    min-width: 280px;
    flex-shrink: 0;
}

        .driver-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .driver-title {
            font-size: 14px;
            color: #636e72;
            margin-bottom: 5px;
            display: block;
        }

        .driver-name {
            font-size: 18px;
            font-weight: 600;
            color: #2d3436;
            margin-bottom: 8px;
        }

        .driver-id {
            font-size: 13px;
            color: #0984e3;
            background: #e3f2fd;
            padding: 4px 8px;
            border-radius: 4px;
            display: inline-block;
            margin-bottom: 15px;
        }

        .leadership-container {
            margin-top: 15px;
        }

        .leadership-label {
            font-size: 13px;
            color: #636e72;
            margin-bottom: 5px;
        }

        .leadership-value {
            font-size: 24px;
            font-weight: 700;
            color: #0984e3;
        }

        .leadership-max {
            font-size: 14px;
            color: #636e72;
            margin-left: 5px;
        }

        /* Form percentage indicator */
        .form-percentage {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #0984e3;
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
        }

        /* Driver card remove button */
        .driver-remove-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 28px;
            height: 28px;
            background: #ff6b6b;
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            transition: all 0.2s;
            z-index: 10;
        }

        .driver-remove-btn:hover {
            background: #ff5252;
            transform: scale(1.1);
        }

        /* KSA Flag header for driver card */
        .ksa-header {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(to right, #006233, white, #ce1126);
        }

        /* Section spacing */
        .section-spacing {
            margin: 25px 0;
        }

        /* Select dropdown styling */
        .select-label {
            font-size: 13px;
            color: #636e72;
            margin-bottom: 8px;
            display: block;
        }

        /* Datepicker styles */
        .datepicker-container {
            position: relative;
        }

        .datepicker-calendar {
            position: absolute;
            top: 100%;
            left: 0;
            background: white;
            border: 1px solid #dfe6e9;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            display: none;
            width: 280px;
        }

        .datepicker-calendar.active {
            display: block;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }

        .calendar-day {
            padding: 8px;
            text-align: center;
            cursor: pointer;
            border-radius: 4px;
        }

        .calendar-day:hover {
            background: #f5f5f5;
        }

        .calendar-day.selected {
            background: #0984e3;
            color: white;
        }

        /* Transfer ownership input */
        .transfer-input-container {
            margin-top: 15px;
            display: none;
        }

        .transfer-input-container.visible {
            display: block;
            animation: slideDown 0.3s ease-out;
        }

        /* Insurance Summary Page */
        .summary-section {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .summary-row:last-child {
            border-bottom: none;
        }

        .summary-label {
            color: #636e72;
            font-size: 14px;
        }

        .summary-value {
            color: #2d3436;
            font-weight: 500;
            font-size: 14px;
        }

        .summary-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 25px;
            color: #2d3436;
            font-size: 20px;
            font-weight: 600;
        }

        .summary-header::before {
            content: 'ðŸ“‹';
            font-size: 24px;
        }

        /* Driver summary styles */
        .driver-summary-card {
            background: white;
            border: 1px solid #dfe6e9;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
        }

        .driver-summary-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .driver-summary-name {
            font-weight: 600;
            color: #2d3436;
        }

        .driver-summary-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }

        /* Add driver card */
        .add-driver-card {
    border: 2px dashed #b2bec3;
    border-radius: 12px;
    padding: 50px 40px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s;
    background: white;
    min-width: 280px;
    flex-shrink: 0;
}

        .add-driver-card:hover {
            border-color: #00b894;
            background: #f8fffe;
        }

        .add-driver-icon {
            font-size: 40px;
            margin-bottom: 10px;
        }

        .add-driver-text {
            color: #636e72;
            font-size: 14px;
        }

        /* Rest of original styles remain exactly the same */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Helvetica;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            max-width: 1440px;
            margin: auto;
        }

        .container {

            overflow: hidden;
            flex: 1;
            display: flex;
            flex-direction: column;
            background-image: url('Frame background.png');
            background-size: cover;
            background-position: 0% 0%;
            background-repeat: no-repeat;
            min-height: 100vh;
        }

        .page active {}

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0px 80px;
            border-bottom: 1px solid #e0e0e0;
            background: rgba(255, 255, 255, 0.8);
backdrop-filter: blur(12px)

        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo-icon {
            width: 40px;
            height: 40px;

        }


        .user-info {
            display: flex;
            padding-right: 10rem;
            gap: 10px;
        }

        .language {
            color: #636e72;
            font-size: 14px;
        }

        .user-avatar {
            width: 35px;
            height: 35px;

        }

        .user-name {
            font-size: 14px;
            color: #2d3436;
        }

        /* Navigation */
        .nav-tabs {
            display: flex;
            gap: 10px;
            justify-content: space-around;
            padding: 0 30px;
            border-bottom: 2px solid #e0e0e0;
            background: #fafafa;
        }

        .nav-tab {
            flex: 1;
            text-align: center;
            padding: 15px 10px;
            color: #636e72;
            font-size: 14px;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            position: relative;
        }

        .nav-tab.active {
            color: #2d3436;
            border-bottom-color: rgba(23, 43, 77, 1);
            font-weight: 500;
        }

        /* Black filter for active tab icons */
        .nav-tab.active img {
            filter: brightness(0);
        }

        /* Completed tab styles */
        .nav-tab.completed {
            border-bottom-color: green !important; 
            border-bottom: 6px solid;
        }

        /* Hide original icon for completed tabs */
        .nav-tab.completed img {
            display: none;
        }

        /* Green tick replaces the icon */
        .nav-tab.completed::before {
            content: '';
            width: 24px;
            height: 24px;
            background-image: url('Frametabgreentick.svg');
            background-size: contain;
            background-repeat: no-repeat;
        }



        /* Main Content */
        .content {
            padding: 40px 0px;
            width: 1220px;
            margin: auto;

        }

        .section-title {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #2d3436;
            font-size: 28px;
            line-height: 32px;
            font-weight: 500;
        }



        /* Tab Selection */
        .tab-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
        }

        .tab-btn {
            padding: 10px 20px;
            border: none;
            cursor: pointer;
            font-size: 14px;
            color: #636e72;
            transition: all 0.3s;
        }

        .tab-btn.active {
            background: rgba(255, 255, 255, 1);
            box-shadow: 1px 6px 20px 0px rgba(0, 0, 0, 0.16);
            padding: 10px 20px;
            color: #0984e3;
            font-weight: 500;
            border-radius: 6px;
        }

        /* Form Fields */
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-row.single {
            grid-template-columns: 1fr;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        /* Floating label styles */
        /* Floating label styles */
        .form-group {
            position: relative;
        }

        .form-group .form-label {
            position: absolute;
            left: 15px;
            top: 12px;
            font-size: 14px;
            color: #999;
            pointer-events: none;
            transition: all 0.3s ease;
            background: white;
            padding: 0 5px;
        }

        .form-group .form-input:focus+.form-label,
        .form-group .form-input:not(:placeholder-shown)+.form-label {
            top: -10px;
            font-size: 12px;
            color: #0984e3;
        }

        .form-input::placeholder {
            color: transparent;
        }

        .form-input:focus::placeholder {
            color: transparent;
        }

        /* For inputs with icons */
        .form-input-with-icon {
            position: relative;
        }

        .form-input-with-icon .form-label {
            position: absolute;
            left: 15px;
            top: 12px;
            font-size: 14px;
            color: #999;
            pointer-events: none;
            transition: all 0.3s ease;
            background: white;
            padding: 0 5px;
            z-index: 1;
        }

        .form-input-with-icon .form-input:focus+.form-label,
        .form-input-with-icon .form-input:not(:placeholder-shown)+.form-label {
            top: -10px;
            font-size: 12px;
            color: #0984e3;
        }

        .form-label {
            font-size: 13px;
            color: #636e72;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .form-input {
            padding: 12px 15px;
            border: 1px solid #dfe6e9;
            border-radius: 6px;
            font-size: 14px;
            transition: all 0.3s;
        }

        .form-input:focus {
            outline: none;
            border-color: #0984e3;
            box-shadow: 0 0 0 3px rgba(9, 132, 227, 0.1);
        }

        .form-input-with-icon {
            position: relative;
        }

        .form-input-with-icon input {
            padding-right: 175px;
        }

        .input-icon {
            margin-left: -2rem;
            color: #b2bec3;
            cursor: pointer;
        }

        /* Checkbox */
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 20px 0;
            cursor: pointer;
            background: rgba(255, 255, 255, 1);
            border: 0.5px solid rgba(235, 236, 240, 1);
            box-shadow: 0px 12px 16px 0px rgba(0, 0, 0, 0.04);
            padding: 23px 20px;
            border-radius: 12px;
        }

        .checkbox-group input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: rgba(24, 201, 47, 1);
            appearance: none;
            -webkit-appearance: none;
            border: 1px solid rgba(151, 160, 175, 1);
            border-radius: 3px;
            position: relative;
            background: white;
        }

        .checkbox-group input[type="checkbox"]:checked {
            background: rgba(24, 201, 47, 1);
        }

        .checkbox-group input[type="checkbox"]:checked::after {
            content: 'âœ“';
            position: absolute;
            color: white;
            font-size: 14px;
            font-weight: bold;
            top: -15%;
            left: 15%;

        }

        .checkbox-label {
            font-size: 14px;
            color: #2d3436;
            cursor: pointer;
            font-weight: 500;
        }

        .checkbox-subtext {
            color: #636e72;
            font-size: 13px;
            font-weight: 400;
        }

        /* Expandable Sections */
        .expandable-section {

            display: none;
        }

        .expandable-section.visible {
            display: block;
            animation: slideDown 0.3s ease-out;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .section-header-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 28px;
            line-height: 32px;
            font-weight: 500;
            color: #2d3436;
        }



        .hide-btn {
            display: flex;
            align-items: center;
            gap: 6px;
            color: rgba(9, 30, 66, 1);
            background: rgba(255, 255, 255, 1);
            border: 0.5px solid rgba(235, 236, 240, 1);
            box-shadow: 0px 12px 16px 0px rgba(0, 0, 0, 0.04);
            padding: 10px 15px;
            font-size: 13px;
            cursor: pointer;
            text-decoration: none;
            font-weight: 500;
            border-radius: 999px;
        }

        /* Radio Group - KEEPING original for other parts */
        .radio-group {
            display: flex;
            gap: 30px;
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .radio-option input[type="radio"] {
            width: 16px;
            height: 16px;
            cursor: pointer;
            accent-color: #00b894;
        }

        .radio-label {
            font-size: 14px;
            color: #2d3436;
            cursor: pointer;
        }

        .form-group.invalid-radio {
            animation: shake 0.3s;
        }

        @keyframes shake {

            0%,
            100% {
                transform: translateX(0);
            }

            25% {
                transform: translateX(-5px);
            }

            75% {
                transform: translateX(5px);
            }
        }

        .radio-group-container.invalid {
            border: 2px solid #ff6b6b;
            border-radius: 6px;
            padding: 10px;
            background-color: #fff5f5;
        }

        /* Next Button */
        .next-btn {
            background: rgba(40, 99, 228, 1);
            color: white;
            padding: 14px 40px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
            box-shadow: 1px 6px 16px 0px rgba(0, 0, 0, 0.08);

        }


        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            animation: fadeIn 0.3s ease-out;
        }

        .modal-overlay.active {
            display: flex;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        /* Modal overlay layers */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 1000;
}

.modal-overlay.active {
    display: flex;
}

/* Background blur layer */
.modal-background-layer {
background: rgba(255, 255, 255, 0.32);
border: 1px solid;

border-image-source: linear-gradient(115.57deg, rgba(255, 255, 255, 0.8) 0%, rgba(255, 255, 255, 0) 55.23%, rgba(255, 255, 255, 0) 65.1%, rgba(255, 255, 255, 0.4) 100%);

backdrop-filter: blur(15px);

box-shadow: 3px 3px 4px 0px rgba(255, 255, 255, 0.24) inset;

box-shadow: 0px 14px 40px 0px rgba(0, 0, 0, 0.08);
border-radius: 28px;
 width: 512px;
 height: 549px;
}

/* Image layer */
.modal-image-layer {
    
            background-image: url('Frame modalglass.svg');
            background-repeat: no-repeat;
            background-position: -20rem -18rem;
border-radius: 28px;            
     width: 512px;
 height: 549px;
}

/* Modal content */
.modal {
    border-radius: 28px;
    padding: 40px;
 width: 512px;
 height: 549px;
    width: 100%;
    position: relative;
    animation: slideUp 0.3s ease-out;
    z-index: 3;
    background-image: url('Vectormodalbackimag.svg');
            background-repeat: no-repeat;
            background-position: 8rem -5rem;
}
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background:transparent;
            border: none;
            width: 35px;
            height: 35px;
            transition: all 0.3s;
        }


        .modal-title {
            text-align: center;
            color: white;
            font-size: 28px;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .modal-subtitle {
            text-align: center;
            color: rgba(255, 255, 255, 0.9);
            font-size: 14px;
            margin-bottom: 40px;
        }

        .modal-input-group {
            margin-bottom: 20px;
        }

        .modal-input-label {
            display: block;
            color: white;
            font-size: 14px;
            margin-bottom: 10px;
            font-weight: 500;
        }

        .modal-input {
            width: 100%;
            padding: 14px 18px;
            border: none;
            border-radius: 10px;
            font-size: 15px;
            background: white;
            transition: all 0.3s;
        }

        .modal-input:focus {
            outline: none;
        }

        /* .modal-input.error {
            border: 2px solid #ff6b6b;
        } */

        .error-message {
            color: #fff;
            font-size: 12px;
            margin-top: 5px;
            background: rgba(255, 107, 107, 0.3);
            padding: 5px 10px;
            border-radius: 5px;
            display: none;
        }

        /* .error-message.show {
            display: block;
        } */

        .modal-btn {
            width: 100%;
            padding: 14px;
            border: none;
            border-radius: 25px;
            background: white;
            color: black;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 5rem;
        }

        /* .modal-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
        } */

        .modal-link {
            text-align: center;
            margin-top: 20px;
            color: white;
            font-size: 14px;
        }

        .modal-link a {
            color: white;
            font-weight: 600;
            text-decoration: underline;
            cursor: pointer;
        }

        /* OTP Input Styles */
        .otp-container {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 30px 0;
        }

        .otp-input {
            width: 60px;
            height: 60px;
            text-align: center;
            font-size: 24px;
            font-weight: 600;
            border: none;
            border-radius: 12px;
            background: white;
            transition: all 0.3s;
        }

        .otp-input:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.4);
            transform: scale(1.05);
        }

        .otp-status {
            text-align: center;
            color: white;
            font-size: 15px;
            margin-top: 20px;
            font-weight: 500;
        }

        .otp-edit {
            text-align: center;
            margin-top: 15px;
        }

        .otp-edit a {
            color: white;
            font-size: 14px;
            cursor: pointer;
            text-decoration: underline;
        }

        /* Insurance Details Page */
        .insurance-section {
            display: none;
        }

        .insurance-section.active {
            display: block;
        }

        .insurance-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 25px;
            color: #2d3436;
            font-size: 20px;
            font-weight: 600;
        }


        .insurance-question {
            font-size: 14px;
            color: #636e72;
            margin-bottom: 15px;
        }

        .workshop-options {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
        }

        .workshop-btn {
            flex: 1;
            padding: 12px 20px;
            border: 2px solid #dfe6e9;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            color: #636e72;
            transition: all 0.3s;
            text-align: center;
        }

        .workshop-btn.active {
            border-color: #00b894;
            background: #e8f8f5;
            color: #00b894;
            font-weight: 500;
        }

        .drivers-section {
            margin-top: 30px;
        }

        .drivers-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            color: #2d3436;
            font-size: 18px;
            font-weight: 600;
        }

        

        #driversContainer {
    display: flex;
    gap: 15px;
    margin-bottom: 15px;
    overflow-x: auto;
}

        .driver-details {
            display: flex;
            gap: 30px;
            font-size: 13px;
            color: #636e72;
        }

        .driver-detail {
            display: flex;
            flex-direction: column;
        }

        .driver-detail-label {
            font-size: 11px;
            margin-bottom: 3px;
            color: #636e72;
        }

        .driver-detail-value {
            color: #2d3436;
            font-weight: 500;
            font-size: 14px;
        }

        /* Side Panel / Drawer */
        .drawer-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            z-index: 2000;
            animation: fadeIn 0.3s ease-out;
        }

        .drawer-overlay.active {
            display: block;
        }

        .drawer {
            position: fixed;
            top: 0;
            right: -600px;
            width: 550px;
            height: 100%;
            background: white;
            box-shadow: -4px 0 20px rgba(0, 0, 0, 0.15);
            transition: right 0.3s ease-out;
            z-index: 2001;
            overflow-y: auto;
            overflow-x: hidden;
        }

        .drawer.active {
            right: 0;
        }

        .drawer-header {
            padding: 25px 30px;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            background: white;
            z-index: 10;
        }

        .drawer-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 20px;
            font-weight: 600;
            color: #2d3436;
        }

        .drawer-title::before {
            content: 'âœ…';
            font-size: 24px;
        }

        .drawer-close {
            background: none;
            border: none;
            font-size: 24px;
            color: #636e72;
            cursor: pointer;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            transition: all 0.2s;
        }

        .drawer-close:hover {
            background: #f5f5f5;
            color: #2d3436;
        }

        .drawer-content {
            padding: 30px;
        }

        .drawer-checkbox {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 25px;
            padding: 15px;
            background: #e8f8f5;
            border-radius: 8px;
        }

        .drawer-checkbox input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: #00b894;
        }

        .drawer-checkbox label {
            font-size: 14px;
            font-weight: 500;
            color: #2d3436;
            cursor: pointer;
        }

        /* Range Slider */
        .range-group {
            margin-bottom: 25px;
        }

        .range-label {
            font-size: 13px;
            color: #636e72;
            margin-bottom: 15px;
            font-weight: 500;
            display: block;
        }

        .range-slider {
            position: relative;
            margin-bottom: 10px;
        }

        .range-slider input[type="range"] {
            width: 100%;
            height: 6px;
            background: #e0e0e0;
            outline: none;
            border-radius: 3px;
            -webkit-appearance: none;
            appearance: none;
        }

        .range-slider input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: #0984e3;
            cursor: pointer;
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .range-slider input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: #0984e3;
            cursor: pointer;
            border-radius: 50%;
            border: none;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .range-labels {
            display: flex;
            justify-content: space-between;
            font-size: 11px;
            color: #b2bec3;
            margin-top: 5px;
        }

        .range-value {
            text-align: center;
            font-weight: 600;
            color: #0984e3;
            margin-top: 10px;
        }

        /* Number Stepper */
        .stepper-group {
            margin-bottom: 20px;
        }

        .stepper-label {
            font-size: 13px;
            color: #636e72;
            margin-bottom: 8px;
            font-weight: 500;
            display: block;
        }

        .stepper {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .stepper-btn {
            width: 35px;
            height: 35px;
            border: 1px solid #dfe6e9;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            color: #636e72;
            transition: all 0.2s;
        }

        .stepper-btn:hover {
            background: #f5f5f5;
            border-color: #0984e3;
            color: #0984e3;
        }

        .stepper-value {
            flex: 1;
            text-align: center;
            padding: 10px;
            border: 1px solid #dfe6e9;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
        }

        /* Checkbox List */
        .checkbox-list {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }

        .checkbox-list-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 0;
        }

        .checkbox-list-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: #00b894;
        }

        .checkbox-list-item label {
            font-size: 13px;
            color: #2d3436;
            cursor: pointer;
            flex: 1;
        }

        /* Section Title */
        .section-title-small {
            font-size: 14px;
            font-weight: 600;
            color: #2d3436;
            margin: 25px 0 15px 0;
        }

        /* Save Button in Drawer */
        .drawer-save-btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #0984e3, #74b9ff);
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 12px rgba(9, 132, 227, 0.3);
            margin-top: 30px;
        }

        .drawer-save-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(9, 132, 227, 0.4);
        }

        /* Dropdown with checkboxes */
        .dropdown-checkboxes {
            position: relative;
        }

        .dropdown-toggle {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #dfe6e9;
            border-radius: 6px;
            background: white;
            text-align: left;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
            color: #636e72;
            transition: all 0.3s;
        }

        .dropdown-toggle:hover {
            border-color: #0984e3;
        }

        .dropdown-menu {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #dfe6e9;
            border-radius: 6px;
            margin-top: 5px;
            padding: 10px;
            display: none;
            z-index: 100;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            max-height: 250px;
            overflow-y: auto;
        }

        .dropdown-menu.active {
            display: block;
        }

        /* Assistant */
        .assistant {
            position: absolute;
            bottom: 0px;
            right: 0px;
            cursor: pointer;
            display: none;
            z-index: 0;

        }





        /* Footer */
        .footer {
            margin-top: auto;
            background: rgba(255, 255, 255, 0.8);
            padding: 20px 80px;
            backdrop-filter: blur(12px);

            border: 0.5px solid rgba(223, 225, 230, 1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 10;
        }

        .qr-section {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .qr-codes {
            display: flex;
            gap: 10px;
        }

        .qr-code {
            width: 60px;
            height: 60px;

        }

        .qr-text {
            font-size: 13px;
            color: #2d3436;
        }

        .qr-subtext {
            font-size: 12px;
            color: #636e72;
        }

        .payment-icons {
            display: flex;
            gap: 10px;
            align-items: center;
            padding-right: 1rem;

        }

        .payment-icon {
            width: 35px;
            height: 35px;
        }

        /* Select Dropdown */
        select.form-input {
            cursor: pointer;
            background: white;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23636e72' d='M6 9L1 4h10z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 12px center;
            padding-right: 35px;
        }

        /* Page Transitions */
        .page {
            display: none;
        }

        .page.active {
            display: block;
            animation: pageSlide 0.4s ease-out;
        }

        @keyframes pageSlide {
            from {
                opacity: 0;
                transform: translateX(20px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* Toast Notifications */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 10000;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .toast {
            min-width: 300px;
            padding: 16px 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            display: flex;
            align-items: center;
            gap: 12px;
            animation: slideInRight 0.3s ease-out;
            position: relative;
            overflow: hidden;
        }

        .toast::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
        }

        .toast.success::before {
            background: #00b894;
        }

        .toast.error::before {
            background: #ff6b6b;
        }

        .toast.warning::before {
            background: #fdcb6e;
        }

        .toast-icon {
            font-size: 24px;
            flex-shrink: 0;
        }

        .toast-content {
            flex: 1;
        }

        .toast-title {
            font-weight: 600;
            font-size: 14px;
            color: #2d3436;
            margin-bottom: 2px;
        }

        .toast-message {
            font-size: 13px;
            color: #636e72;
        }

        .toast-close {
            background: none;
            border: none;
            color: #b2bec3;
            cursor: pointer;
            font-size: 18px;
            padding: 0;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: color 0.2s;
        }

        .toast-close:hover {
            color: #636e72;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(400px);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }

            to {
                transform: translateX(400px);
                opacity: 0;
            }
        }

        .toast.removing {
            animation: slideOutRight 0.3s ease-out forwards;
        }

        /* Form validation styles */
        .form-input.invalid {
            border-color: #ff6b6b;
            background-color: #fff5f5;
        }

        .form-input.invalid:focus {
            border-color: #ff6b6b;
            box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.1);
        }

        /* Two-column tab layout */
        .tab-buttons-two-col {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
            background-color: rgba(244, 245, 247, 1);
            padding: 5px 4px;
            border-radius: 8px;
        }

        .tab-buttons-two-col .tab-button {
            padding: 10px 8px;

            background: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            color: rgba(94, 108, 132, 1);
            transition: all 0.3s;
            text-align: center;
            font-weight: 400;
        }

        .tab-buttons-two-col .tab-button.active {
            background: rgba(255, 255, 255, 1);
            box-shadow: 1px 6px 16px 0px rgba(0, 0, 0, 0.08);
            padding: 10px 8px;
            border-radius: 6px;
        }

        /* Engine size input group */
        .engine-size-group {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 12px;
            border: 1px solid #dfe6e9;
            border-radius: 6px;
            background: white;
        }

        .engine-size-label {
            font-size: 14px;
            color: #636e72;
            font-weight: 500;
        }

        .engine-size-input {
            width: 80px;
            padding: 8px;
            border: 1px solid #dfe6e9;
            border-radius: 4px;
            text-align: center;
            font-size: 14px;
        }

        .engine-size-controls {
            display: flex;
            gap: 5px;
        }

        .engine-size-btn {
            width: 28px;
            height: 28px;
            border: 1px solid #dfe6e9;
            background: white;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            color: #636e72;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .engine-size-btn:hover {
            background: #f5f5f5;
            border-color: #0984e3;
            color: #0984e3;
        }

        /* City dropdown with flag */
        .city-dropdown-container {
            position: relative;
        }

        .city-dropdown-display {
            display: flex;
            align-items: baseline;
            gap: 10px;
            padding: 12px 15px;
            border: 1px solid #dfe6e9;
            border-radius: 6px;
            cursor: pointer;
            background: white;
        }

        .city-flag {
            margin-top: -5px;
        }

        .city-name {
            flex: 1;
            font-size: 14px;
            color: #2d3436;
        }

        .dropdown-arrow {
            font-size: 12px;
            color: #636e72;
        }

        /* Grid layout for features */
        /* Grid layout for features */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 20px;
        }

        .features-grid-four {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .feature-item {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .feature-label {
            font-size: 13px;
            color: rgba(23, 43, 77, 1);
            font-weight: 500;
        }

        .fill-car-details {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            gap: 10px;
        }

        .fill-car-details-tabs-container {
            border: 0.5px solid rgba(235, 236, 240, 1);
            box-shadow: 0px 12px 16px 0px rgba(0, 0, 0, 0.04);
            background: rgba(255, 255, 255, 1);
            border-radius: 16px;
            padding: 27px 24px;
        }

        .fill-car-details-tab-selector {
            width: 370px;
            display: flex;
            justify-content: center;
            background-color: rgba(244, 245, 247, 1);
            padding: 5px 4px;
            border-radius: 8px;
        }

        .new-customer-form-row {
            display: flex;
        }

        .Vehicle-Data-Usage-title-image {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .Safety-Features-Availability-title-image {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .page1-boxes {
            border: 0.5px solid rgba(235, 236, 240, 1);
            box-shadow: 0px 12px 16px 0px rgba(0, 0, 0, 0.04);

            border-radius: 16px;
            padding: 27px 24px;
            margin-bottom: 20px;
            background: rgba(255, 255, 255, 1);
        }

        @media (max-width: 768px) {
            .features-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }

            .nav-tabs {
                overflow-x: auto;
            }

            .content {
                padding: 20px;
            }

            .otp-input {
                width: 50px;
                height: 50px;
                font-size: 20px;
            }

            .modal {
                padding: 30px 20px;
            }

            .toast-container {
                top: 10px;
                right: 10px;
                left: 10px;
            }

            .toast {
                min-width: auto;
            }

            .drawer {
                width: 100%;
                right: -100%;
            }

            .drawer.active {
                right: 0;
            }

            .drawer-content {
                padding: 20px;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            #driversContainer {
                grid-template-columns: 1fr;
            }

            .country-item {
                flex-wrap: wrap;
                gap: 10px;
            }

            .tab-buttons {
                flex-direction: column;
            }
        }

        @media (max-width: 968px) {

            /* Make 3-column grids into 2 columns on medium screens */
            div[style*="grid-template-columns: 1fr 1fr 1fr"] {
                grid-template-columns: 1fr 1fr !important;
            }
        }

        @media (max-width: 768px) {
            .features-grid {
                grid-template-columns: 1fr;
            }

            .features-grid-four {
                grid-template-columns: repeat(2, 1fr);
            }

            /* Make all grids single column on mobile */
            div[style*="grid-template-columns"] {
                grid-template-columns: 1fr !important;
            }
        }

        @media (max-width: 480px) {
            .features-grid-four {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo">
                <div class="logo-icon">
                    <img src="Frame 1984078200.svg" alt="">
                </div>

            </div>
            <div class="user-info">
                <span class="language">
                    <img src="Language.svg" alt="">
                </span>
                <div class="user-avatar">
                    <img src="Frame 1984078172 (1).svg" alt="">
                </div>

            </div>
        </div>

        <!-- Navigation Tabs -->
        <div class="nav-tabs">
            <div class="nav-tab active" id="carDetailsTab">
                <img src="Frametab1.svg" alt="">Car Details
            </div>
            <div class="nav-tab" id="insuranceDetailsTab">
                <img src="Frametab2.svg" alt="">Insurance Details
            </div>
            <div class="nav-tab" id="summaryTab">
                <img src="Frametab3.svg" alt="">Summary
            </div>
            <div class="nav-tab">
                <img src="Frametab4.svg" alt="">Offers
            </div>
            <div class="nav-tab">
                <img src="Frametab5.svg" alt="">Quotes List
            </div>
            <div class="nav-tab">
                <img src="Frametab6.svg" alt="">Checkout & Payment
            </div>
        </div>

        <!-- Page 1: Car Details -->
        <div class="page active" id="carDetailsPage">
            <div class="content">

                <div class="fill-car-details">
                    <img src="Frame fillcarddetails.svg" alt="">
                    <h2 class="section-title">Fill Your Car Details</h2>
                </div>
                <div class="fill-car-details-tabs-container">
                    <!-- Tab Selector -->
                    <div class="tab-selector fill-car-details-tab-selector">
                        <button class="tab-btn active" id="nationalTab">National Number</button>
                        <button class="tab-btn" id="customTab">New Customer Number</button>
                    </div>

                    <!-- National Number Form -->
                    <div id="nationalForm">
                        <div class="form-row single">
                            <div class="form-group">
                                <div class="form-input-with-icon">
                                    <input type="text" class="form-input" placeholder="Enter serial number">
                                    <label class="form-label">Serial Number</label>
                                    <span class="input-icon">â“˜</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Custom Number Form -->
                    <!-- Custom Number Form -->
                    <div id="customForm" style="display: none;">
                        <div class="form-row new-customer-form-row">
                            <div class="form-group">
                                <div class="form-input-with-icon">
                                    <input type="text" class="form-input" placeholder="Enter custom card number">
                                    <label class="form-label">Custom Card Number</label>
                                </div>
                            </div>
                            <div class="form-group form-input-with-icon">
                                <input type="text" class="form-input " placeholder="Enter year">
                                <label class="form-label">Year of Manufacture</label>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Show Additional Data Checkbox -->
                <div class="checkbox-group" onclick="toggleAdditionalData()">
                    <input type="checkbox" id="additionalDataCheck">
                    <label class="checkbox-label">
                        Show Additional Data
                        <span class="checkbox-subtext">(The more information you have, the more discounts we can offer
                            you.)</span>
                    </label>
                </div>

                <!-- Vehicle Data and Usage Section -->
                <!-- Vehicle Data and Usage Section -->
                <div id="vehicleSection" class="expandable-section">
                    <div class="section-header">
                        <div class="Vehicle-Data-Usage-title-image">
                            <img src="Frame vehchiledatausage.svg" alt="">
                            <h3 class="section-header-title">Vehicle Data and Usage</h3>
                        </div>
                        <button class="hide-btn" onclick="toggleVehicleSection()">Hide <img src="Frame hidebtn.svg"
                                alt=""></button>
                    </div>

                    <div class="page1-boxes">
                        <!-- Row 1: 3 columns -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr 2fr; gap: 20px; margin-bottom: 20px;">
                            <!-- Transmission Type -->
                            <div class="feature-item">
                                <label class="feature-label">Transmission type</label>
                                <div class="tab-buttons-two-col">
                                    <button class="tab-button" onclick="setTransmission('manual')">Manual</button>
                                    <button class="tab-button active"
                                        onclick="setTransmission('automatic')">Automatic</button>
                                </div>
                            </div>

                            <!-- Engine Size (CC) -->
                            <div class="feature-item">
                                <label class="feature-label">Engine Size (CC)</label>
                                <div class="engine-size-group">
                                    <span class="engine-size-label">CC</span>
                                    <input type="text" class="engine-size-input" id="engineSize" value="800" readonly>
                                    <div class="engine-size-controls">
                                        <button class="engine-size-btn" onclick="decrementEngine()">âˆ’</button>
                                        <button class="engine-size-btn" onclick="incrementEngine()">+</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Modifications -->
                            <div style="width: 50%;" class="feature-item">
                                <label class="feature-label">Any modifications to the vehicle?</label>
                                <div class="tab-buttons-two-col">
                                    <button class="tab-button" onclick="setModifications(true)">Yes</button>
                                    <button class="tab-button active" onclick="setModifications(false)">No</button>
                                </div>
                            </div>
                        </div>

                        <!-- Row 2: 2 columns -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                            <!-- Kilometers -->
                            <div class="feature-item">
                                <label class="feature-label">Number of kilometers during the year</label>
                                <div class="tab-buttons-two-col">
                                    <button class="tab-button active" onclick="setKilometers('less')">Less Than 20,000
                                        Km/s</button>
                                    <button class="tab-button" onclick="setKilometers('more')">Above 20,000
                                        Km/s</button>
                                </div>
                            </div>

                            <!-- Trailer -->
                            <div style="width: 50%;" class="feature-item">
                                <label class="feature-label">Trailer included with the vehicle?</label>
                                <div class="tab-buttons-two-col">
                                    <button class="tab-button" onclick="setTrailer(true)">Yes</button>
                                    <button class="tab-button active" onclick="setTrailer(false)">No</button>
                                </div>
                            </div>
                        </div>

                        <!-- Row 3: 3 columns -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr 2fr; gap: 20px; margin-bottom: 20px;">
                            <!-- Driving City -->
                            <div class="feature-item">
                                <label class="feature-label">Select Driving City</label>
                                <div class="city-dropdown-container" onclick="toggleCityDropdown()">
                                    <div class="city-dropdown-display" id="cityDisplay">
                                        <span class="city-flag">ðŸ‡©ðŸ‡¿</span>
                                        <span class="city-name">Algeria</span>
                                        <span class="dropdown-arrow">â–¼</span>
                                    </div>
                                </div>
                            </div>

                            <!-- City of Work -->
                            <div class="feature-item">
                                <label class="feature-label">City of Work</label>
                                <div class="city-dropdown-container" onclick="toggleWorkCityDropdown()">
                                    <div class="city-dropdown-display" id="workCityDisplay">
                                        <span class="city-flag">ðŸ‡©ðŸ‡¿</span>
                                        <span class="city-name">Algeria</span>
                                        <span class="dropdown-arrow">â–¼</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Renew Insurance -->
                            <div style="width: 50%;" class="feature-item">
                                <label class="feature-label">Want to renew your insurance?</label>
                                <div class="tab-buttons-two-col">
                                    <button class="tab-button" onclick="setRenew(true)">Yes</button>
                                    <button class="tab-button active" onclick="setRenew(false)">No</button>
                                </div>
                            </div>
                        </div>

                        <!-- Row 4: Full width -->
                        <div style="margin-bottom: 20px; width: 50%;">
                            <div class="feature-item">
                                <label class="feature-label">Coverage for any driver of any age</label>
                                <div class="tab-buttons-two-col" style="max-width: 100%;">
                                    <button class="tab-button active" onclick="setCoverage('18')">Any Driver Age 18 &
                                        Above</button>
                                    <button class="tab-button" onclick="setCoverage('21')">Any Driver Age 21 &
                                        Above</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Show Other Details Checkbox -->
                    <div class="checkbox-group" onclick="toggleOtherDetails()">
                        <input type="checkbox" id="otherDetailsCheck">
                        <label class="checkbox-label">
                            Show Other Details
                            <span class="checkbox-subtext">(Other details about the vehicle safety features.)</span>
                        </label>
                    </div>
                </div>
                <!-- Safety Features Section -->
                <!-- Safety Features Section -->
                <div id="safetySection" class="expandable-section">
                    <div class="section-header">
                        <div class="Safety-Features-Availability-title-image">
                            <img src="Frame saftyfeaturestitleimage.svg" alt="">
                            <h3 class="section-header-title">Safety Features Availability</h3>
                        </div>
                        <button class="hide-btn" onclick="toggleSafetySection()">Hide <img src="Frame hidebtn.svg"
                                alt=""></button>
                    </div>
                    <div class="page1-boxes">
                        <div class="features-grid-four">
                            <!-- ABS System -->
                            <div class="feature-item">
                                <label class="feature-label">ABS System</label>
                                <div class="tab-buttons-two-col">
                                    <button class="tab-button" onclick="setFeature('abs', true)">Yes</button>
                                    <button class="tab-button active" onclick="setFeature('abs', false)">No</button>
                                </div>
                            </div>

                            <!-- Fire Extinguisher -->
                            <div class="feature-item">
                                <label class="feature-label">Fire extinguisher</label>
                                <div class="tab-buttons-two-col">
                                    <button class="tab-button" onclick="setFeature('fire', true)">Yes</button>
                                    <button class="tab-button active" onclick="setFeature('fire', false)">No</button>
                                </div>
                            </div>

                            <!-- Anti-theft Alarm -->
                            <div class="feature-item">
                                <label class="feature-label">Anti-theft alarm</label>
                                <div class="tab-buttons-two-col">
                                    <button class="tab-button" onclick="setFeature('alarm', true)">Yes</button>
                                    <button class="tab-button active" onclick="setFeature('alarm', false)">No</button>
                                </div>
                            </div>

                            <!-- Speed Control -->
                            <div class="feature-item">
                                <label class="feature-label">Speed control</label>
                                <div class="tab-buttons-two-col">
                                    <button class="tab-button" onclick="setFeature('speed', true)">Yes</button>
                                    <button class="tab-button active" onclick="setFeature('speed', false)">No</button>
                                </div>
                            </div>

                            <!-- Rear Sensors -->
                            <div class="feature-item">
                                <label class="feature-label">Rear sensors</label>
                                <div class="tab-buttons-two-col">
                                    <button class="tab-button" onclick="setFeature('rear', true)">Yes</button>
                                    <button class="tab-button active" onclick="setFeature('rear', false)">No</button>
                                </div>
                            </div>

                            <!-- Front Camera -->
                            <div class="feature-item">
                                <label class="feature-label">Front Camera</label>
                                <div class="tab-buttons-two-col">
                                    <button class="tab-button" onclick="setFeature('frontCamera', true)">Yes</button>
                                    <button class="tab-button active"
                                        onclick="setFeature('frontCamera', false)">No</button>
                                </div>
                            </div>

                            <!-- Rear Camera -->
                            <div class="feature-item">
                                <label class="feature-label">Rear Camera</label>
                                <div class="tab-buttons-two-col">
                                    <button class="tab-button" onclick="setFeature('rearCamera', true)">Yes</button>
                                    <button class="tab-button active"
                                        onclick="setFeature('rearCamera', false)">No</button>
                                </div>
                            </div>

                            <!-- Automatic Brakes -->
                            <div class="feature-item">
                                <label class="feature-label">Automatic Brakes</label>
                                <div class="tab-buttons-two-col">
                                    <button class="tab-button" onclick="setFeature('autoBrakes', true)">Yes</button>
                                    <button class="tab-button active"
                                        onclick="setFeature('autoBrakes', false)">No</button>
                                </div>
                            </div>

                            <!-- Adaptive Cruise Control -->
                            <div class="feature-item">
                                <label class="feature-label">Adaptive Cruise Control</label>
                                <div class="tab-buttons-two-col">
                                    <button class="tab-button" onclick="setFeature('cruise', true)">Yes</button>
                                    <button class="tab-button active" onclick="setFeature('cruise', false)">No</button>
                                </div>
                            </div>

                            <!-- Front Sensors -->
                            <div class="feature-item">
                                <label class="feature-label">Front Sensors</label>
                                <div class="tab-buttons-two-col">
                                    <button class="tab-button" onclick="setFeature('frontSensors', true)">Yes</button>
                                    <button class="tab-button active"
                                        onclick="setFeature('frontSensors', false)">No</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <button class="next-btn" onclick="openLoginModal()">
                    Next
                </button>
            </div>
        </div>
        <!-- Page 2: Insurance Details -->
        <div class="page" id="insuranceDetailsPage">
            <div class="content">
                <h2 class="insurance-header"> <img src="Frame insurancedetailimage.svg" alt="">Insurance Details </h2>

                <div class="fill-car-details-tabs-container">
                    
                    

                <p class="insurance-question">Where do you want to get your car repaired?</p>

                <div class="workshop-options">
                    <button class="workshop-btn active">Accredited Workshop</button>
                    <button class="workshop-btn">Agency</button>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label">Insurance Start Date</label>
                        <div class="form-input-with-icon datepicker-container">
                            <input type="text" class="form-input" placeholder="Select date" id="insuranceStartDate">
                            <span class="input-icon" onclick="toggleDatePicker('insuranceDatePicker')">ðŸ“…</span>
                            <div class="datepicker-calendar" id="insuranceDatePicker"></div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Estimated Car Value</label>
                        <div class="form-input-with-icon">
                            <input type="text" class="form-input" placeholder="Enter value">
                            <span class="input-icon">ðŸ”’</span>
                        </div>
                    </div>
                </div>

                </div>

                <div class="drivers-section">
                    <h3 class="drivers-header">Drivers</h3>
<div style="display: flex; align-items: center;">
                    <div id="driversContainer">
                        <div class="driver-card">
                            <div class="ksa-header"></div>
                            <div class="form-percentage">100%</div>
                            <div class="driver-card-header">
                                <div class="driver-info">
                                    <span class="driver-title">Main Driver</span>
                                    <div class="driver-name">ABU MOHAMMED</div>
                                    <div class="driver-id">ID-10-10716624</div>
                                </div>
                            </div>
                            <div class="leadership-container">
                                <div class="leadership-label">Leadership</div>
                                <div class="leadership-value">100<span class="leadership-max">/100</span></div>
                            </div>
                        </div>
                        <div class="add-driver-card" onclick="openAddDriverDrawer()">
                        <div class="add-driver-icon">âž•</div>
                        <div class="add-driver-text">Add Additional Driver</div>
                    </div>
                    </div>

                    
                    </div>
                </div>

                <div class="checkbox-group" style="margin-top: 40px;">
                    <input type="checkbox" id="transferCheck" onchange="toggleTransferInput()">
                    <label class="checkbox-label">Insurance required for transfer of ownership?</label>
                </div>

                <div id="transferInputContainer" class="transfer-input-container">
                    <div class="form-group">
                        <label class="form-label">Transfer Details</label>
                        <input type="text" class="form-input" placeholder="Enter transfer ownership details">
                    </div>
                </div>

                <button class="next-btn" onclick="goToSummary()">
                    Next âž”
                </button>
            </div>
        </div>


        <!-- Page 3: Summary/Offers Page -->
        <div class="page" id="summaryPage">
            <div class="content" style="max-width: 1200px; margin: 0 auto;">

                <!-- Insurance Information Header -->
                <div style="background: #f0f4f8; border-radius: 12px; padding: 25px; margin-bottom: 30px;">
                    <h3 style="font-size: 14px; color: #636e72; margin-bottom: 20px; font-weight: 500;">INSURANCE
                        INFORMATION</h3>

                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 20px;">
                        <div>
                            <div style="font-size: 12px; color: #636e72; margin-bottom: 5px;">Starting Date</div>
                            <div style="font-size: 14px; color: #2d3436; font-weight: 600;" id="summaryStartDate">05 Jan
                                2026</div>
                        </div>
                        <div>
                            <div style="font-size: 12px; color: #636e72; margin-bottom: 5px;">Insurance ID</div>
                            <div style="font-size: 14px; color: #2d3436; font-weight: 600;" id="summarySerial">
                                1103736154</div>
                        </div>
                        <div>
                            <div style="font-size: 12px; color: #636e72; margin-bottom: 5px;">Transmission</div>
                            <div style="font-size: 14px; color: #2d3436; font-weight: 600;" id="summaryTransmission">
                                Automatic</div>
                        </div>
                        <div>
                            <div style="font-size: 12px; color: #636e72; margin-bottom: 5px;">Kilometers</div>
                            <div style="font-size: 14px; color: #2d3436; font-weight: 600;" id="summaryKilometers">Less
                                than 20,000</div>
                        </div>
                    </div>
                </div>

                <!-- Vehicle Information -->
                <div style="background: #f0f4f8; border-radius: 12px; padding: 25px; margin-bottom: 30px;">
                    <h3 style="font-size: 14px; color: #636e72; margin-bottom: 20px; font-weight: 500;">VEHICLE
                        INFORMATION</h3>

                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px;">
                        <div>
                            <div style="font-size: 12px; color: #636e72; margin-bottom: 5px;">Name</div>
                            <div style="font-size: 14px; color: #2d3436; font-weight: 600;">Abu Mohammed</div>
                        </div>
                        <div>
                            <div style="font-size: 12px; color: #636e72; margin-bottom: 5px;">City</div>
                            <div style="font-size: 14px; color: #2d3436; font-weight: 600;" id="summaryCity">Algeria
                            </div>
                        </div>
                        <div>
                            <div style="font-size: 12px; color: #636e72; margin-bottom: 5px;">Model Number</div>
                            <div style="font-size: 14px; color: #2d3436; font-weight: 600;">2018</div>
                        </div>
                        <div>
                            <div style="font-size: 12px; color: #636e72; margin-bottom: 5px;">Plate Number</div>
                            <div style="font-size: 14px; color: #2d3436; font-weight: 600;">5326</div>
                        </div>
                    </div>
                </div>

                <!-- Drivers Summary Section -->
                <div style="background: #f0f4f8; border-radius: 12px; padding: 25px; margin-bottom: 30px;">
                    <h3 style="font-size: 14px; color: #636e72; margin-bottom: 20px; font-weight: 500;">DRIVERS
                        INFORMATION</h3>
                    <div id="summaryDriversContainer">
                        <!-- Drivers will be added here dynamically -->
                    </div>
                </div>

                <!-- Offers Header -->
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 25px;">
                    <span style="font-size: 32px;">ðŸ”</span>
                    <h2 style="font-size: 24px; font-weight: 600; color: #2d3436; margin: 0;">
                        We Found <span style="color: #0984e3;">43</span> Best Offers For You
                    </h2>
                </div>

                <!-- Search and Filter -->
                <div style="display: flex; gap: 15px; margin-bottom: 30px;">
                    <div style="flex: 1; position: relative;">
                        <input type="text" placeholder="Search Offers"
                            style="width: 100%; padding: 12px 15px 12px 45px; border: 1px solid #dfe6e9; border-radius: 8px; font-size: 14px;">
                        <span
                            style="position: absolute; left: 15px; top: 50%; transform: translateY(-50%); color: #b2bec3;">ðŸ”</span>
                    </div>
                    <button
                        style="padding: 12px 25px; border: 1px solid #dfe6e9; background: white; border-radius: 8px; cursor: pointer; display: flex; align-items: center; gap: 8px; font-size: 14px; color: #636e72;">
                        <span>âš™ï¸</span> Apply Filter
                    </button>
                    <button
                        style="padding: 12px 20px; border: 1px solid #dfe6e9; background: white; border-radius: 8px; cursor: pointer; font-size: 20px;">
                        â˜°
                    </button>
                    <button
                        style="padding: 12px 20px; border: 1px solid #dfe6e9; background: white; border-radius: 8px; cursor: pointer; font-size: 20px;">
                        âŠž
                    </button>
                </div>

                <!-- Offer Card -->
                <div
                    style="border: 1px solid #dfe6e9; border-radius: 12px; padding: 25px; background: white; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
                    <div
                        style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px;">
                        <div style="display: flex; gap: 15px; align-items: center;">
                            <div
                                style="width: 60px; height: 60px; background: #f0f4f8; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 24px;">
                                ðŸ¢
                            </div>
                            <div>
                                <h3 style="font-size: 18px; font-weight: 600; color: #2d3436; margin: 0 0 5px 0;">
                                    Cooperative Insurance Company</h3>
                                <div style="font-size: 13px; color: #0984e3;">Terms & Conditions</div>
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 13px; color: #636e72; margin-bottom: 5px;">Payable Amount</div>
                            <div style="font-size: 28px; font-weight: 700; color: #2d3436;">ï·¼ 2,562.86</div>
                        </div>
                    </div>

                    <div style="display: flex; gap: 8px; align-items: center; margin-bottom: 20px;">
                        <span style="color: #00b894; font-size: 18px;">âœ“</span>
                        <span style="font-size: 14px; color: #2d3436; font-weight: 500;">Insurance covers free of
                            charge</span>
                    </div>

                    <div style="font-size: 13px; color: #636e72; line-height: 1.6; margin-bottom: 20px;">
                        The largest workshop network in the Kingdom, speed in settling claims, and international
                        coverage
                    </div>

                    <div style="margin-bottom: 20px;">
                        <div style="font-size: 13px; color: #636e72; margin-bottom: 10px;">ðŸ’° Paid Add-ons</div>
                        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input type="checkbox"
                                    style="width: 18px; height: 18px; cursor: pointer; accent-color: #00b894;">
                                <span style="font-size: 13px; color: #2d3436;">Replacement Car</span>
                                <span
                                    style="background: #00b894; color: white; padding: 2px 8px; border-radius: 12px; font-size: 11px; font-weight: 600;">ï·¼
                                    200</span>
                            </label>
                            <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                                <input type="checkbox"
                                    style="width: 18px; height: 18px; cursor: pointer; accent-color: #00b894;">
                                <span style="font-size: 13px; color: #2d3436;">Roadside Assistance</span>
                                <span
                                    style="background: #00b894; color: white; padding: 2px 8px; border-radius: 12px; font-size: 11px; font-weight: 600;">ï·¼
                                    3.5</span>
                            </label>
                        </div>
                    </div>

                    <div style="display: flex; gap: 15px; align-items: flex-end;">
                        <div style="flex: 1;">
                            <div style="font-size: 13px; color: #636e72; margin-bottom: 8px;">Endurance Value</div>
                            <select
                                style="width: 100%; padding: 12px 15px; border: 1px solid #dfe6e9; border-radius: 8px; font-size: 14px; cursor: pointer; background: white;">
                                <option>Select Value</option>
                                <option>10,000</option>
                                <option>20,000</option>
                                <option>30,000</option>
                            </select>
                        </div>
                        <button
                            style="flex: 1; padding: 14px; background: linear-gradient(135deg, #0984e3, #74b9ff); color: white; border: none; border-radius: 8px; font-size: 15px; font-weight: 600; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px;">
                            Buy Now â†’
                        </button>
                    </div>

                    <div style="margin-top: 20px; text-align: right;">
                        <button
                            style="background: none; border: none; color: #0984e3; font-size: 14px; cursor: pointer; text-decoration: underline;">
                            Pricing Details â†“
                        </button>
                    </div>
                </div>

            </div>
        </div>

        <!-- Footer -->
        <div class="footer" style="position: relative; z-index: 1;">
            <div class="qr-section">
                <div class="qr-codes">
                    <img src="Frame 1171279861 (1).svg" alt="">
                </div>
                <div>
                    <div class="qr-text"><strong>Scan QR | Download Our Mobile App</strong></div>
                    <div class="qr-subtext">We are live on google play store as well as Apple App Store</div>
                </div>
            </div>
            <div class="payment-icons">
                <div class="payment-icon">
                    <img src="Mada_Logo.svg" alt="">
                </div>
                <div class="payment-icon">
                    <img src="Mastercard_logo.svg" alt="">
                </div>
                <div class="payment-icon"><img src="Mis_Logo.svg" alt=""></div>
                <div class="payment-icon"><img src="Sadad_Logo.svg" alt=""></div>
                <div class="payment-icon">
                    <img src="Tabby_logo.svg" alt="">
                </div>
                <div class="payment-icon"><img src="Visa_Logo.svg" alt=""></div>

            </div>
            <div class="assistant">
                <img src="Frame 1984078246.svg" alt="">
            </div>
        </div>
    </div>

    <!-- Login Modal with Captcha -->
    <!-- Login Modal with Captcha -->
<div class="modal-overlay" id="loginModal">
    <div class="modal-background-layer">
    <div class="modal-image-layer">
    <div class="modal">
        <button class="modal-close"><img src="modallogo.svg" alt=""></button>
        <h2 class="modal-title">Verify Your Identity</h2>
        <p class="modal-subtitle">Secure login via National ID or Residence Number.</p>

        <div class="modal-input-group">
            <label class="modal-input-label">Enter Number</label>
            <input type="text" id="phoneInput" class="modal-input" maxlength="10" placeholder="Enter 10-digit number">
            <div class="error-message" id="phoneError">Please enter exactly 10 digits</div>
        </div>

        <div class="modal-input-group">
            <label class="modal-input-label">Re-Enter Captcha</label>
            <div style="display: flex; gap: 10px; align-items: stretch; background: white; border-radius: 8px;">
                <div style="flex: 0 0 120px; background: white; padding: 12px; border-radius: 8px; font-family: monospace; font-size: 18px; letter-spacing: 2px; text-align: center; font-weight: bold; color: #666; text-decoration: line-through; display: flex; align-items: center; justify-content: center;" id="captchaDisplay">NEJ7Rz</div>
                <input type="text" id="captchaInput" class="modal-input" placeholder="Enter Here" style="flex: 1; margin: 0;">
                <button type="button" onclick="refreshCaptcha()" style="flex: 0 0 50px; background: rgba(255, 255, 255, 0.3); border: none; border-radius: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center;  transition: all 0.2s;"><img src="Frame captcharefesh.svg" alt=""></button>
            </div>
            <div class="error-message" id="captchaError">Captcha does not match</div>
        </div>

        <button class="modal-btn" onclick="verifyPhone()">Login</button>

        <div class="modal-link">
            Don't have an account? <a>Enable Account</a>
        </div>
    </div>
    </div>
    </div>
</div>

    <!-- OTP Modal (Updated - removed verification code display) -->
    <!-- OTP Modal -->
<div class="modal-overlay" id="otpModal">
    
     <div class="modal-background-layer">
   <div class="modal-image-layer">
    <div class="modal">
        <button class="modal-close" ><img src="modallogo.svg" alt=""></button> 
        <h2 class="modal-title">Enter Code</h2>
        <p class="modal-subtitle" id="otpSubtitle">We sent a verification code to +966 4252 1232</p>

        <div class="otp-container">
            <input type="text" class="otp-input" maxlength="1" id="otp1" oninput="moveToNext(this, 'otp2')" onkeydown="handleBackspace(event, null, 'otp2')">
            <input type="text" class="otp-input" maxlength="1" id="otp2" oninput="moveToNext(this, 'otp3')" onkeydown="handleBackspace(event, 'otp1', 'otp3')">
            <input type="text" class="otp-input" maxlength="1" id="otp3" oninput="moveToNext(this, 'otp4')" onkeydown="handleBackspace(event, 'otp2', 'otp4')">
            <input type="text" class="otp-input" maxlength="1" id="otp4" oninput="handleOtpComplete()" onkeydown="handleBackspace(event, 'otp3', null)">
        </div>

        <div class="otp-status" id="otpStatus"></div>

        <div class="otp-edit">
            <a onclick="backToLogin()">Wrong phone number? <strong>Edit</strong></a>
        </div>
    </div>
    </div>
    </div>
</div>

    <!-- Add Driver Drawer - UPDATED to match images -->
    <div class="drawer-overlay" id="addDriverOverlay" onclick="closeAddDriverDrawer()"></div>
    <div class="drawer" id="addDriverDrawer">
        <div class="drawer-header">
            <h3 class="drawer-title">Add Driver</h3>
            <button class="drawer-close" onclick="closeAddDriverDrawer()">Ã—</button>
        </div>
        <div class="drawer-content">
            <!-- Authorized Driver Checkbox -->
            <div class="drawer-checkbox">
                <input type="checkbox" id="authorizedCheck">
                <label for="authorizedCheck">This Driver is Authorized</label>
            </div>

            <!-- Serial Number -->
            <div class="form-group">
                <label class="form-label">Serial Number</label>
                <div class="form-input-with-icon">
                    <input type="text" class="form-input" placeholder="Enter serial number" id="driverSerial">
                    <span class="input-icon">â“˜</span>
                </div>
            </div>

            <!-- Birth Month and Year with Datepicker -->
            <div class="form-row" style="margin-top: 20px;">
                <div class="form-group">
                    <label class="form-label">Birth Month</label>
                    <div class="form-input-with-icon datepicker-container">
                        <input type="text" class="form-input" placeholder="Select month" id="birthMonth">
                        <span class="input-icon" onclick="toggleMonthPicker()">ðŸ“…</span>
                        <div class="datepicker-calendar" id="monthPicker"></div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Birth Year</label>
                    <div class="form-input-with-icon datepicker-container">
                        <input type="text" class="form-input" placeholder="Select year" id="birthYear">
                        <span class="input-icon" onclick="toggleYearPicker()">ðŸ“…</span>
                        <div class="datepicker-calendar" id="yearPicker"></div>
                    </div>
                </div>
            </div>

            <!-- Kinship and Education with Datepicker -->
            <div class="form-row" style="margin-top: 20px;">
                <div class="form-group">
                    <label class="form-label">Kinship</label>
                    <div class="form-input-with-icon datepicker-container">
                        <input type="text" class="form-input" placeholder="Select kinship" id="kinship">
                        <span class="input-icon" onclick="toggleKinshipPicker()">ðŸ“…</span>
                        <div class="datepicker-calendar" id="kinshipPicker"></div>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Education</label>
                    <div class="form-input-with-icon datepicker-container">
                        <input type="text" class="form-input" placeholder="Select education" id="education">
                        <span class="input-icon" onclick="toggleEducationPicker()">ðŸ“…</span>
                        <div class="datepicker-calendar" id="educationPicker"></div>
                    </div>
                </div>
            </div>

            <!-- Leadership Ratio -->
            <div class="range-group" style="margin-top: 25px;">
                <label class="range-label">Leadership Ratio</label>
                <div class="range-slider">
                    <input type="range" id="leadershipRange" min="10" max="100" value="20" step="10"
                        oninput="updateRangeValue()">
                </div>
                <div class="range-labels">
                    <span>10%</span>
                    <span>20%</span>
                    <span>40%</span>
                    <span>60%</span>
                    <span>80%</span>
                    <span>100%</span>
                </div>
                <div class="range-value" id="rangeValue">20%</div>
            </div>

            <!-- Show Additional Details -->
            <div class="drawer-checkbox">
                <input type="checkbox" id="showAdditionalDetailsCheck" onchange="toggleAdditionalDetailsDrawer()">
                <label for="showAdditionalDetailsCheck">Show Additional Details</label>
            </div>

            <!-- Additional Details Section -->
            <div id="additionalDetailsSection" style="display: none;">
                <!-- Childs Under 16Y and No. of Accidents -->
                <div class="form-row" style="margin-top: 20px;">
                    <div class="stepper-group">
                        <label class="stepper-label">Childs Under 16Y</label>
                        <div class="stepper">
                            <button class="stepper-btn" onclick="decrementValue('childsCount')">âˆ’</button>
                            <div class="stepper-value" id="childsCount">1</div>
                            <button class="stepper-btn" onclick="incrementValue('childsCount')">+</button>
                        </div>
                    </div>
                    <div class="stepper-group">
                        <label class="stepper-label">No. of Accidents</label>
                        <div class="stepper">
                            <button class="stepper-btn" onclick="decrementValue('accidentsCount')">âˆ’</button>
                            <div class="stepper-value" id="accidentsCount">0</div>
                            <button class="stepper-btn" onclick="incrementValue('accidentsCount')">+</button>
                        </div>
                    </div>
                </div>

                <!-- Health condition or license restriction - UPDATED to tab style -->
                <div class="section-spacing">
                    <div class="section-title-small">Driver have any health condition or license restriction?</div>
                    <div class="tab-buttons" id="healthTabButtons">
                        <button class="tab-button active" onclick="setHealthCondition(false)">No</button>
                        <button class="tab-button" onclick="setHealthCondition(true)">Yes</button>
                    </div>

                    <div id="healthConditionsDropdown" style="display: none; margin-top: 15px;">
                        <label class="select-label">Please Select Below</label>
                        <div class="multi-select-container">
                            <div class="multi-select-display empty" onclick="toggleMultiSelect('healthMultiSelect')"
                                id="healthSelectDisplay">
                                <span>Select options</span>
                            </div>
                            <div class="multi-select-options" id="healthMultiSelect">
                                <!-- Options will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Driver Violations - UPDATED to tab style -->
                <div class="section-spacing">
                    <div class="section-title-small">Driver Violations?</div>
                    <div class="tab-buttons" id="violationsTabButtons">
                        <button class="tab-button active" onclick="setViolations(false)">No</button>
                        <button class="tab-button" onclick="setViolations(true)">Yes</button>
                    </div>

                    <div id="violationsDropdown" style="display: none; margin-top: 15px;">
                        <label class="select-label">Please Select Below</label>
                        <div class="multi-select-container">
                            <div class="multi-select-display empty" onclick="toggleMultiSelect('violationsMultiSelect')"
                                id="violationsSelectDisplay">
                                <span>Select options</span>
                            </div>
                            <div class="multi-select-options" id="violationsMultiSelect">
                                <!-- Options will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Valid driver's license in another country? - UPDATED to tab style -->
                <div class="section-spacing">
                    <div class="section-title-small">Valid driver's license in another country?</div>
                    <div class="tab-buttons" id="licenseTabButtons">
                        <button class="tab-button active" onclick="setValidLicense(false)">No</button>
                        <button class="tab-button" onclick="setValidLicense(true)">Yes</button>
                    </div>

                    <div id="countrySection" style="display: none; margin-top: 20px;">
                        <div class="section-title-small">Select Country</div>

                        <!-- Country Dropdown -->
                        <div class="form-group" style="margin-bottom: 15px;">
                            <label class="select-label">Choose Country</label>
                            <select class="form-input" id="countryDropdown" onchange="addSelectedCountry()">
                                <option value="">Select a country</option>
                                <option value="0">ðŸ‡©ðŸ‡¿ Algeria</option>
                                <option value="1">ðŸ‡«ðŸ‡® Finland</option>
                                <option value="2">ðŸ‡ºðŸ‡¸ United States</option>
                                <option value="3">ðŸ‡¬ðŸ‡§ United Kingdom</option>
                                <option value="4">ðŸ‡¦ðŸ‡ª UAE</option>
                            </select>
                        </div>

                        <div class="section-title-small">Selected Countries</div>
                        <div class="country-list" id="countryList">
                            <!-- Selected countries will be added here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Save Button -->
            <button class="drawer-save-btn" onclick="saveDriver()">Save</button>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Assistant -->


    <script>
        // Data storage for the form
        let formData = {
            vehicle: {},
            insurance: {},
            drivers: []
        };

        let generatedOTP = '0000';
        let currentCaptcha = 'NEJ7Rz';

        // Generate random captcha
        function generateCaptcha() {
            const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZabcdefghjkmnpqrstuvwxyz23456789';
            let captcha = '';
            for (let i = 0; i < 6; i++) {
                captcha += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return captcha;
        }

        // Refresh captcha
        function refreshCaptcha() {
            currentCaptcha = generateCaptcha();
            document.getElementById('captchaDisplay').textContent = currentCaptcha;
            document.getElementById('captchaInput').value = '';
            document.getElementById('captchaError').classList.remove('show');
            document.getElementById('captchaInput').classList.remove('error');
        }

        // Health condition options (from first image)
        const healthOptions = [
            { id: 'auto_car', label: 'Auto Car', selected: false },
            { id: 'prosthetic_limb', label: 'Prosthetic Limb', selected: false },
            { id: 'vision_lenses', label: 'Vision Augmenting Lenses', selected: false },
            { id: 'daytime_only', label: 'Only Daytime', selected: false },
            { id: 'hearing_aid', label: 'Hearing Aid', selected: false },
            { id: 'disabled_vehicle', label: 'Vehicle for Disabled', selected: false },
            { id: 'ksa_only', label: 'Driving Inside KSA Only', selected: false },
            { id: 'auto_car2', label: 'Auto Car', selected: false }
        ];

        // Violation options (from second image)
        const violationOptions = [
            { id: 'over_speeding', label: 'Over Speeding', selected: false },
            { id: 'wrong_parking', label: 'Wrong Parking', selected: false },
            { id: 'red_light', label: 'Red Light Violation', selected: false },
            { id: 'no_license', label: 'Driving without License', selected: false },
            { id: 'no_seatbelt', label: 'Driving without Seat Belt', selected: false }
        ];

        // Country options
        const countryOptions = [
            { code: 'DZ', name: 'Algeria', flag: 'ðŸ‡©ðŸ‡¿', years: 6, count: 0 },
            { code: 'FI', name: 'Finland', flag: 'ðŸ‡«ðŸ‡®', years: 0, count: 0 },
            { code: 'US', name: 'United States', flag: 'ðŸ‡ºðŸ‡¸', years: 3, count: 0 },
            { code: 'GB', name: 'United Kingdom', flag: 'ðŸ‡¬ðŸ‡§', years: 5, count: 0 },
            { code: 'AE', name: 'UAE', flag: 'ðŸ‡¦ðŸ‡ª', years: 2, count: 0 }
        ];

        // Initialize multi-select options
        function initializeMultiSelectOptions() {
            const healthContainer = document.getElementById('healthMultiSelect');
            const violationsContainer = document.getElementById('violationsMultiSelect');

            if (healthContainer) {
                healthOptions.forEach(option => {
                    const div = document.createElement('div');
                    div.className = 'multi-option';
                    div.innerHTML = `
                        <div class="option-checkbox ${option.selected ? 'checked' : ''}" 
                             onclick="toggleOptionCheckbox(this, '${option.id}')"></div>
                        <span class="option-label">${option.label}</span>
                    `;
                    healthContainer.appendChild(div);
                });

                updateMultiSelectDisplay('healthSelectDisplay', healthOptions.filter(opt => opt.selected).map(opt => opt.label));
            }

            if (violationsContainer) {
                violationOptions.forEach(option => {
                    const div = document.createElement('div');
                    div.className = 'multi-option';
                    div.innerHTML = `
                        <div class="option-checkbox ${option.selected ? 'checked' : ''}" 
                             onclick="toggleOptionCheckbox(this, '${option.id}', 'violations')"></div>
                        <span class="option-label">${option.label}</span>
                    `;
                    violationsContainer.appendChild(div);
                });

                updateMultiSelectDisplay('violationsSelectDisplay', violationOptions.filter(opt => opt.selected).map(opt => opt.label));
            }
        }

        // Toggle checkbox
        function toggleOptionCheckbox(element, optionId, type = 'health') {
            element.classList.toggle('checked');

            if (type === 'health') {
                const option = healthOptions.find(opt => opt.id === optionId);
                if (option) option.selected = element.classList.contains('checked');
                updateMultiSelectDisplay('healthSelectDisplay', healthOptions.filter(opt => opt.selected).map(opt => opt.label));
            } else {
                const option = violationOptions.find(opt => opt.id === optionId);
                if (option) option.selected = element.classList.contains('checked');
                updateMultiSelectDisplay('violationsSelectDisplay', violationOptions.filter(opt => opt.selected).map(opt => opt.label));
            }
        }

        // Update multi-select display
        function updateMultiSelectDisplay(displayId, selectedLabels) {
            const display = document.getElementById(displayId);
            if (!display) return;

            display.innerHTML = '';

            if (selectedLabels.length === 0) {
                display.innerHTML = '<span>Select options</span>';
                display.classList.add('empty');
                return;
            }

            display.classList.remove('empty');

            // Show first 2-3 items, then show "+X More"
            const maxVisible = 2;
            const visibleItems = selectedLabels.slice(0, maxVisible);
            const hiddenCount = selectedLabels.length - maxVisible;

            visibleItems.forEach(label => {
                const tag = document.createElement('div');
                tag.className = 'selected-tag';
                tag.textContent = label;
                display.appendChild(tag);
            });

            if (hiddenCount > 0) {
                const moreTag = document.createElement('div');
                moreTag.className = 'more-count';
                moreTag.textContent = `+${hiddenCount} More`;
                display.appendChild(moreTag);
            }
        }

        // Toggle multi-select dropdown
       // Toggle multi-select dropdown
function toggleMultiSelect(selectId) {
    const select = document.getElementById(selectId);
    if (select) {
        const isActive = select.classList.contains('active');
        
        // Close all other dropdowns
        document.querySelectorAll('.multi-select-options').forEach(opt => {
            opt.classList.remove('active');
        });
        
        if (!isActive) {
            // Position the dropdown on the left of the drawer
            const drawer = document.getElementById('addDriverDrawer');
            const drawerRect = drawer.getBoundingClientRect();
            
            select.style.left = (drawerRect.left - 320) + 'px';
            select.style.top = '150px';
            
            select.classList.add('active');
        }
    }
} 

        // Tab functions - UPDATED for tab style
        function setHealthCondition(hasCondition) {
            const dropdown = document.getElementById('healthConditionsDropdown');
            const buttons = document.getElementById('healthTabButtons').querySelectorAll('.tab-button');

            buttons.forEach(btn => btn.classList.remove('active'));
            buttons[hasCondition ? 1 : 0].classList.add('active');

            if (dropdown) {
                dropdown.style.display = hasCondition ? 'block' : 'none';
            }
        }

        function setViolations(hasViolations) {
            const dropdown = document.getElementById('violationsDropdown');
            const buttons = document.getElementById('violationsTabButtons').querySelectorAll('.tab-button');

            buttons.forEach(btn => btn.classList.remove('active'));
            buttons[hasViolations ? 1 : 0].classList.add('active');

            if (dropdown) {
                dropdown.style.display = hasViolations ? 'block' : 'none';
            }
        }

        function setValidLicense(hasLicense) {
            const section = document.getElementById('countrySection');
            const buttons = document.getElementById('licenseTabButtons').querySelectorAll('.tab-button');

            buttons.forEach(btn => btn.classList.remove('active'));
            buttons[hasLicense ? 1 : 0].classList.add('active');

            if (section) {
                section.style.display = hasLicense ? 'block' : 'none';
                if (hasLicense) {
                    // Clear the country list when opening
                    document.getElementById('countryList').innerHTML = '';
                    document.getElementById('countryDropdown').value = '';
                }
            }
        }



        function addSelectedCountry() {
            const dropdown = document.getElementById('countryDropdown');
            const selectedIndex = dropdown.value;

            if (!selectedIndex) return;

            const country = countryOptions[selectedIndex];
            const countryList = document.getElementById('countryList');

            // Check if country already added
            const existingCountries = Array.from(countryList.children);
            const countryExists = existingCountries.some(item =>
                item.querySelector('.country-name').textContent === country.name
            );

            if (countryExists) {
                showToast('warning', 'Already Added', `${country.name} is already in the list`);
                dropdown.value = '';
                return;
            }

            const newIndex = countryList.children.length;

            const countryItem = document.createElement('div');
            countryItem.className = 'country-item';
            countryItem.dataset.countryIndex = selectedIndex;
            countryItem.innerHTML = `
        <div class="country-info">
            <span class="country-flag">${country.flag}</span>
            <span class="country-name">${country.name}</span>
        </div>
        <span class="country-years" id="countryYears${newIndex}">0</span>
        <div class="country-stepper">
            <button class="country-stepper-btn" onclick="decrementCountryYears(${newIndex})">âˆ’</button>
            <span class="country-stepper-value" id="countryCount${newIndex}">0</span>
            <button class="country-stepper-btn" onclick="incrementCountryYears(${newIndex})">+</button>
        </div>
        <button class="country-remove" onclick="this.parentElement.remove()">ðŸ—‘ï¸</button>
    `;
            countryList.appendChild(countryItem);

            // Reset dropdown
            dropdown.value = '';

            showToast('success', 'Country Added', `${country.name} has been added`);
        }

        function incrementCountryYears(index) {
            const countElement = document.getElementById(`countryCount${index}`);
            const yearsElement = document.getElementById(`countryYears${index}`);
            if (countElement && yearsElement) {
                let value = parseInt(countElement.textContent);
                countElement.textContent = value + 1;
                yearsElement.textContent = value + 1;
            }
        }

        function decrementCountryYears(index) {
            const countElement = document.getElementById(`countryCount${index}`);
            const yearsElement = document.getElementById(`countryYears${index}`);
            if (countElement && yearsElement) {
                let value = parseInt(countElement.textContent);
                if (value > 0) {
                    countElement.textContent = value - 1;
                    yearsElement.textContent = value - 1;
                }
            }
        }



        // Save driver function - Updated to include remove button
        function saveDriver() {
            const serialNumber = document.getElementById('driverSerial').value || `DRV-${Math.floor(Math.random() * 1000000)}`;
            const leadershipValue = document.getElementById('rangeValue').textContent;
            const leadershipNumber = parseInt(leadershipValue);

            // Generate random driver name and ID
            const driverNames = ['SARA AL QAHTANI', 'AHMED ALI', 'FATIMA HASSAN', 'KHALED OMAR', 'NOUR MOHAMMED'];
            const randomName = driverNames[Math.floor(Math.random() * driverNames.length)];
            const randomId = `ID-10${Math.floor(10000000 + Math.random() * 90000000)}`;

            // Create driver object
            const driver = {
                id: randomId,
                name: randomName,
                leadership: leadershipNumber,
                serialNumber: serialNumber,
                isAdditional: true
            };

            formData.drivers.push(driver);

            // Save to localStorage
            localStorage.setItem('formData', JSON.stringify(formData));

            // Create driver card matching the image with remove button
            const driversContainer = document.getElementById('driversContainer');
            const newDriverCard = document.createElement('div');
            newDriverCard.className = 'driver-card';
            newDriverCard.innerHTML = `
        <div class="ksa-header"></div>
        <button class="driver-remove-btn" onclick="removeDriver(this)">Ã—</button>
        <div class="form-percentage">${leadershipNumber}%</div>
        <div class="driver-card-header">
            <div class="driver-info">
                <span class="driver-title">Additional Driver</span>
                <div class="driver-name">${randomName}</div>
                <div class="driver-id">${randomId}</div>
            </div>
        </div>
        <div class="leadership-container">
            <div class="leadership-label">Leadership</div>
            <div class="leadership-value">${leadershipNumber}<span class="leadership-max">/100</span></div>
        </div>
    `;

            driversContainer.appendChild(newDriverCard);

            showToast('success', 'Driver Added', 'Additional driver has been successfully added');
            closeAddDriverDrawer();

            // Reset form
            document.getElementById('driverSerial').value = '';
            document.getElementById('leadershipRange').value = 20;
            updateRangeValue();
            document.getElementById('showAdditionalDetailsCheck').checked = false;
            document.getElementById('additionalDetailsSection').style.display = 'none';

            // Reset tabs to default
            setHealthCondition(false);
            setViolations(false);
            setValidLicense(false);
        }

        // Function to remove driver
        function removeDriver(button) {
            const card = button.closest('.driver-card');
            const driverId = card.querySelector('.driver-id').textContent;

            // Remove from formData
            formData.drivers = formData.drivers.filter(driver => driver.id !== driverId);
            localStorage.setItem('formData', JSON.stringify(formData));

            // Remove card with animation
            card.style.opacity = '0';
            card.style.transform = 'scale(0.8)';
            setTimeout(() => card.remove(), 300);

            showToast('success', 'Driver Removed', 'Driver has been removed successfully');
        }

        // Load saved drivers on page load
        function loadSavedDrivers() {
            const savedData = localStorage.getItem('formData');
            if (savedData) {
                formData = JSON.parse(savedData);

                // Recreate driver cards for additional drivers
                const driversContainer = document.getElementById('driversContainer');
                formData.drivers.forEach(driver => {
                    const newDriverCard = document.createElement('div');
                    newDriverCard.className = 'driver-card';
                    newDriverCard.innerHTML = `
                <div class="ksa-header"></div>
                <button class="driver-remove-btn" onclick="removeDriver(this)">Ã—</button>
                <div class="form-percentage">${driver.leadership}%</div>
                <div class="driver-card-header">
                    <div class="driver-info">
                        <span class="driver-title">Additional Driver</span>
                        <div class="driver-name">${driver.name}</div>
                        <div class="driver-id">${driver.id}</div>
                    </div>
                </div>
                <div class="leadership-container">
                    <div class="leadership-label">Leadership</div>
                    <div class="leadership-value">${driver.leadership}<span class="leadership-max">/100</span></div>
                </div>
            `;
                    driversContainer.appendChild(newDriverCard);
                });
            }
        }

        // Toast Notification System
        function showToast(type, title, message) {
            const container = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;

            const icon = type === 'success' ? 'âœ“' : type === 'error' ? 'âœ•' : 'âš ';

            toast.innerHTML = `
                <div class="toast-icon">${icon}</div>
                <div class="toast-content">
                    <div class="toast-title">${title}</div>
                    <div class="toast-message">${message}</div>
                </div>
                <button class="toast-close" onclick="removeToast(this)">Ã—</button>
            `;

            container.appendChild(toast);

            setTimeout(() => {
                removeToast(toast.querySelector('.toast-close'));
            }, 4000);
        }

        function removeToast(button) {
            const toast = button.closest('.toast');
            toast.classList.add('removing');
            setTimeout(() => {
                toast.remove();
            }, 300);
        }

        // Toggle functions for hide buttons
        function toggleVehicleSection() {
            const section = document.getElementById('vehicleSection');
            const checkbox = document.getElementById('additionalDataCheck');

            if (section.classList.contains('visible')) {
                section.classList.remove('visible');
                checkbox.checked = false;
                // Also hide safety section if visible
                document.getElementById('safetySection').classList.remove('visible');
                document.getElementById('otherDetailsCheck').checked = false;
            } else {
                section.classList.add('visible');
                checkbox.checked = true;
            }
        }

        function toggleSafetySection() {
            const section = document.getElementById('safetySection');
            const checkbox = document.getElementById('otherDetailsCheck');

            if (section.classList.contains('visible')) {
                section.classList.remove('visible');
                checkbox.checked = false;
            } else {
                section.classList.add('visible');
                checkbox.checked = true;
            }
        }

        // Remove invalid class on input
        document.addEventListener('input', function (e) {
            if (e.target.classList.contains('form-input')) {
                e.target.classList.remove('invalid');
            }
        });

        document.addEventListener('change', function (e) {
            if (e.target.classList.contains('form-input')) {
                e.target.classList.remove('invalid');
            }
        });

        // Tab switching
        document.getElementById('nationalTab').addEventListener('click', function () {
            document.getElementById('nationalTab').classList.add('active');
            document.getElementById('customTab').classList.remove('active');
            document.getElementById('nationalForm').style.display = 'block';
            document.getElementById('customForm').style.display = 'none';
        });

        document.getElementById('customTab').addEventListener('click', function () {
            document.getElementById('customTab').classList.add('active');
            document.getElementById('nationalTab').classList.remove('active');
            document.getElementById('customForm').style.display = 'block';
            document.getElementById('nationalForm').style.display = 'none';
        });

        // Toggle Additional Data
        function toggleAdditionalData() {
            const checkbox = document.getElementById('additionalDataCheck');
            const section = document.getElementById('vehicleSection');

            if (checkbox.checked) {
                section.classList.add('visible');
            } else {
                section.classList.remove('visible');
                document.getElementById('otherDetailsCheck').checked = false;
                document.getElementById('safetySection').classList.remove('visible');
            }
        }

        // Toggle Other Details
        function toggleOtherDetails() {
            const checkbox = document.getElementById('otherDetailsCheck');
            const section = document.getElementById('safetySection');

            if (checkbox.checked) {
                section.classList.add('visible');
            } else {
                section.classList.remove('visible');
            }
        }

        // Datepicker functions
        function toggleDatePicker(pickerId) {
            const picker = document.getElementById(pickerId);
            picker.classList.toggle('active');

            if (picker.classList.contains('active')) {
                generateCalendar(pickerId);
            }
        }

        function generateCalendar(pickerId) {
            const picker = document.getElementById(pickerId);
            const today = new Date();
            const currentMonth = today.getMonth();
            const currentYear = today.getFullYear();

            const months = ['January', 'February', 'March', 'April', 'May', 'June',
                'July', 'August', 'September', 'October', 'November', 'December'];

            let calendarHTML = `
                <div class="calendar-header">
                    <button onclick="changeMonth('${pickerId}', -1)">â€¹</button>
                    <span>${months[currentMonth]} ${currentYear}</span>
                    <button onclick="changeMonth('${pickerId}', 1)">â€º</button>
                </div>
                <div class="calendar-grid">
                    <div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
            `;

            // Generate days
            const firstDay = new Date(currentYear, currentMonth, 1).getDay();
            const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();

            // Empty cells before first day
            for (let i = 0; i < firstDay; i++) {
                calendarHTML += `<div class="calendar-day"></div>`;
            }

            // Days of the month
            for (let day = 1; day <= daysInMonth; day++) {
                calendarHTML += `
                    <div class="calendar-day" onclick="selectDate('${pickerId}', ${day}, ${currentMonth}, ${currentYear})">
                        ${day}
                    </div>
                `;
            }

            calendarHTML += '</div>';
            picker.innerHTML = calendarHTML;
        }

        function selectDate(pickerId, day, month, year) {
            const date = new Date(year, month, day);
            const formattedDate = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;

            if (pickerId === 'insuranceDatePicker') {
                document.getElementById('insuranceStartDate').value = formattedDate;
                formData.insurance.startDate = formattedDate;
            }

            document.getElementById(pickerId).classList.remove('active');
            showToast('success', 'Date Selected', `Date set to ${formattedDate}`);
        }

        function changeMonth(pickerId, direction) {
            // Implementation for month change
            generateCalendar(pickerId);
        }

        // Toggle transfer ownership input
        function toggleTransferInput() {
            const checkbox = document.getElementById('transferCheck');
            const container = document.getElementById('transferInputContainer');

            if (checkbox.checked) {
                container.classList.add('visible');
            } else {
                container.classList.remove('visible');
            }
        }

        // Month and Year pickers for driver drawer
        function toggleMonthPicker() {
            const picker = document.getElementById('monthPicker');
            picker.classList.toggle('active');

            if (picker.classList.contains('active')) {
                generateMonthPicker();
            }
        }

        function generateMonthPicker() {
            const picker = document.getElementById('monthPicker');
            const months = ['January', 'February', 'March', 'April', 'May', 'June',
                'July', 'August', 'September', 'October', 'November', 'December'];

            let calendarHTML = '<div class="calendar-grid">';

            months.forEach((month, index) => {
                calendarHTML += `
                    <div class="calendar-day" onclick="selectMonth(${index + 1}, '${month}')">
                        ${month.substring(0, 3)}
                    </div>
                `;
            });

            calendarHTML += '</div>';
            picker.innerHTML = calendarHTML;
        }

        function selectMonth(monthNumber, monthName) {
            document.getElementById('birthMonth').value = monthName;
            document.getElementById('monthPicker').classList.remove('active');
        }

        function toggleYearPicker() {
            const picker = document.getElementById('yearPicker');
            picker.classList.toggle('active');

            if (picker.classList.contains('active')) {
                generateYearPicker();
            }
        }

        function generateYearPicker() {
            const picker = document.getElementById('yearPicker');
            const currentYear = new Date().getFullYear();
            let calendarHTML = '<div class="calendar-grid">';

            for (let year = currentYear - 80; year <= currentYear - 18; year++) {
                calendarHTML += `
                    <div class="calendar-day" onclick="selectYear(${year})">
                        ${year}
                    </div>
                `;
            }

            calendarHTML += '</div>';
            picker.innerHTML = calendarHTML;
        }

        function selectYear(year) {
            document.getElementById('birthYear').value = year;
            document.getElementById('yearPicker').classList.remove('active');
        }

        // Kinship and Education pickers
        function toggleKinshipPicker() {
            const picker = document.getElementById('kinshipPicker');
            picker.classList.toggle('active');

            if (picker.classList.contains('active')) {
                const kinships = ['Father', 'Mother', 'Spouse', 'Child', 'Sibling', 'Other'];
                let html = '<div class="calendar-grid">';

                kinships.forEach(kinship => {
                    html += `<div class="calendar-day" onclick="selectKinship('${kinship}')">${kinship}</div>`;
                });

                html += '</div>';
                picker.innerHTML = html;
            }
        }

        function selectKinship(kinship) {
            document.getElementById('kinship').value = kinship;
            document.getElementById('kinshipPicker').classList.remove('active');
        }

        function toggleEducationPicker() {
            const picker = document.getElementById('educationPicker');
            picker.classList.toggle('active');

            if (picker.classList.contains('active')) {
                const educations = ['High School', 'Bachelor', 'Master', 'PhD', 'Diploma', 'Other'];
                let html = '<div class="calendar-grid">';

                educations.forEach(education => {
                    html += `<div class="calendar-day" onclick="selectEducation('${education}')">${education}</div>`;
                });

                html += '</div>';
                picker.innerHTML = html;
            }
        }

        function selectEducation(education) {
            document.getElementById('education').value = education;
            document.getElementById('educationPicker').classList.remove('active');
        }

        // Update range value
        function updateRangeValue() {
            const range = document.getElementById('leadershipRange');
            const value = document.getElementById('rangeValue');
            if (range && value) {
                value.textContent = range.value + '%';
            }
        }

        // Toggle Additional Details in Drawer
        function toggleAdditionalDetailsDrawer() {
            const checkbox = document.getElementById('showAdditionalDetailsCheck');
            const section = document.getElementById('additionalDetailsSection');

            if (checkbox.checked) {
                section.style.display = 'block';
            } else {
                section.style.display = 'none';
            }
        }

        // Stepper functions
        function incrementValue(id) {
            const element = document.getElementById(id);
            if (element) {
                let value = parseInt(element.textContent);
                element.textContent = value + 1;
            }
        }

        function decrementValue(id) {
            const element = document.getElementById(id);
            if (element) {
                let value = parseInt(element.textContent);
                if (value > 0) {
                    element.textContent = value - 1;
                }
            }
        }

        // Close dropdowns when clicking outside
        document.addEventListener('click', function (e) {
            // Close multi-selects
            if (!e.target.closest('.multi-select-container')) {
                document.querySelectorAll('.multi-select-options').forEach(select => {
                    select.classList.remove('active');
                });
            }

            // Close datepickers
            if (!e.target.closest('.datepicker-container')) {
                document.querySelectorAll('.datepicker-calendar').forEach(picker => {
                    picker.classList.remove('active');
                });
            }
        });

        // Modal functions
        function openLoginModal() {
            // Save vehicle data
            formData.vehicle = {
                transmission: formData.vehicle.transmission || 'automatic',
                kilometers: formData.vehicle.kilometers || 'less',
                city: 'Algeria'
            };

            // Generate initial captcha
            refreshCaptcha();

            document.getElementById('loginModal').classList.add('active');
        }

        function closeLoginModal() {
            document.getElementById('loginModal').classList.remove('active');
            document.getElementById('phoneInput').value = '';
            document.getElementById('captchaInput').value = '';
            document.getElementById('phoneError').classList.remove('show');
            document.getElementById('captchaError').classList.remove('show');
        }

        function verifyPhone() {
            const phoneInput = document.getElementById('phoneInput');
            const phoneError = document.getElementById('phoneError');
            const phoneValue = phoneInput.value.trim();

            const captchaInput = document.getElementById('captchaInput');
            const captchaError = document.getElementById('captchaError');
            const captchaValue = captchaInput.value.trim();

            let isValid = true;

            // Validate phone
            if (phoneValue.length !== 10 || !/^\d{10}$/.test(phoneValue)) {
                phoneInput.classList.add('error');
                phoneError.classList.add('show');
                showToast('error', 'Invalid Number', 'Please enter exactly 10 digits');
                isValid = false;
            } else {
                phoneInput.classList.remove('error');
                phoneError.classList.remove('show');
            }

            // Validate captcha
            if (captchaValue !== currentCaptcha) {
                captchaInput.classList.add('error');
                captchaError.classList.add('show');
                showToast('error', 'Invalid Captcha', 'Captcha does not match');
                isValid = false;
            } else {
                captchaInput.classList.remove('error');
                captchaError.classList.remove('show');
            }

            if (!isValid) return;

            // Update OTP subtitle with the entered number
            const formatted = '+' + phoneValue.slice(0, 3) + ' ' + phoneValue.slice(3, 7) + ' ' + phoneValue.slice(7);
            document.getElementById('otpSubtitle').textContent = 'We sent a verification code to ' + formatted;

            showToast('success', 'Code Sent', 'Verification code has been sent to your number');

            closeLoginModal();
            openOtpModal();
        }

        function openOtpModal() {
    document.getElementById('otpModal').classList.add('active');
    
    // Clear all OTP inputs
    document.getElementById('otp1').value = '';
    document.getElementById('otp2').value = '';
    document.getElementById('otp3').value = '';
    document.getElementById('otp4').value = '';
    document.getElementById('otpStatus').textContent = '';
    
    // Focus first input
    setTimeout(() => {
        document.getElementById('otp1').focus();
    }, 100);
}

function closeOtpModal() {
    document.getElementById('otpModal').classList.remove('active');
}

        function backToLogin() {
            closeOtpModal();
            openLoginModal();
        }

        // OTP Input Functions
function moveToNext(current, nextId) {
    if (current.value.length === 1 && nextId) {
        document.getElementById(nextId).focus();
    }
}

function handleBackspace(event, prevId, nextId) {
    if (event.key === 'Backspace') {
        if (event.target.value === '' && prevId) {
            event.preventDefault();
            document.getElementById(prevId).focus();
        }
    }
}

function handleOtpComplete() {
    const otp1 = document.getElementById('otp1').value;
    const otp2 = document.getElementById('otp2').value;
    const otp3 = document.getElementById('otp3').value;
    const otp4 = document.getElementById('otp4').value;
    
    if (otp1 && otp2 && otp3 && otp4) {
        verifyOTP();
    }
}

        function verifyOTP() {
    const otp1 = document.getElementById('otp1').value;
    const otp2 = document.getElementById('otp2').value;
    const otp3 = document.getElementById('otp3').value;
    const otp4 = document.getElementById('otp4').value;
    
    const enteredOtp = otp1 + otp2 + otp3 + otp4;
    const statusElement = document.getElementById('otpStatus');
    
    statusElement.textContent = 'Verifying...';

    setTimeout(() => {
        if (enteredOtp === '0000') {
            statusElement.textContent = 'Approved';
            statusElement.style.color = '#00b894';
            showToast('success', 'Verification Successful', 'Your identity has been verified successfully');
            
            setTimeout(() => {
                closeOtpModal();
                // Switch to insurance details page
                document.getElementById('carDetailsPage').classList.remove('active');
                document.getElementById('insuranceDetailsPage').classList.add('active');
                
                // Update navigation tabs
                document.getElementById('carDetailsTab').classList.remove('active');
                document.getElementById('carDetailsTab').classList.add('completed');
                document.getElementById('insuranceDetailsTab').classList.add('active');
                
                showToast('success', 'Welcome!', 'Proceeding to Insurance Details');
            }, 1000);
        } else {
            statusElement.textContent = 'Invalid OTP. Please enter 0000';
            statusElement.style.color = '#ff6b6b';
            showToast('error', 'Invalid OTP', 'Please enter the correct OTP: 0000');
            
            // Clear inputs
            document.getElementById('otp1').value = '';
            document.getElementById('otp2').value = '';
            document.getElementById('otp3').value = '';
            document.getElementById('otp4').value = '';
            document.getElementById('otp1').focus();
        }
    }, 1500);
}

        // Workshop button toggle
        document.querySelectorAll('.workshop-btn').forEach(btn => {
            btn.addEventListener('click', function () {
                document.querySelectorAll('.workshop-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
            });
        });

        // Add Driver Drawer Functions
        function openAddDriverDrawer() {
            document.getElementById('addDriverOverlay').classList.add('active');
            document.getElementById('addDriverDrawer').classList.add('active');
            document.body.style.overflow = 'hidden';

            // Initialize multi-select options when drawer opens
            setTimeout(() => {
                initializeMultiSelectOptions();
            }, 100);
        }

        function closeAddDriverDrawer() {
            document.getElementById('addDriverOverlay').classList.remove('active');
            document.getElementById('addDriverDrawer').classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Go to summary page
        function goToSummary() {
            // Update summary page with collected data
            document.getElementById('summarySerial').textContent = '10-10716624';

            document.getElementById('summaryTransmission').textContent =
                formData.vehicle.transmission || 'Automatic';

            document.getElementById('summaryKilometers').textContent =
                formData.vehicle.kilometers === 'less' ? 'Less Than 20,000 Km/s' : 'Above 20,000 Km/s';

            document.getElementById('summaryCity').textContent =
                formData.vehicle.city || 'Algeria';

            document.getElementById('summaryStartDate').textContent =
                document.getElementById('insuranceStartDate').value || '2024-12-01';

            // Save to localStorage before navigating
            localStorage.setItem('formData', JSON.stringify(formData));

            // Update drivers summary
            const summaryContainer = document.getElementById('summaryDriversContainer');
            summaryContainer.innerHTML = '';

            // Add main driver
            summaryContainer.innerHTML += `
        <div class="driver-summary-card">
            <div class="driver-summary-header">
                <span class="driver-summary-name">ABU MOHAMMED</span>
                <span class="summary-value">100%</span>
            </div>
            <div class="driver-summary-details">
                <div>
                    <div class="summary-label">ID</div>
                    <div class="summary-value">10-10716624</div>
                </div>
                <div>
                    <div class="summary-label">Leadership</div>
                    <div class="summary-value">100%</div>
                </div>
            </div>
        </div>
    `;

            // Add additional drivers
            formData.drivers.forEach(driver => {
                summaryContainer.innerHTML += `
            <div class="driver-summary-card">
                <div class="driver-summary-header">
                    <span class="driver-summary-name">${driver.name}</span>
                    <span class="summary-value">${driver.leadership}%</span>
                </div>
                <div class="driver-summary-details">
                    <div>
                        <div class="summary-label">ID</div>
                        <div class="summary-value">${driver.id}</div>
                    </div>
                    <div>
                        <div class="summary-label">Leadership</div>
                        <div class="summary-value">${driver.leadership}%</div>
                    </div>
                </div>
            </div>
        `;
            });

            // Switch to summary page
            document.getElementById('insuranceDetailsPage').classList.remove('active');
            document.getElementById('summaryPage').classList.add('active');

            // Update navigation tabs
            document.getElementById('insuranceDetailsTab').classList.remove('active');
            document.getElementById('insuranceDetailsTab').classList.add('completed');
            document.getElementById('summaryTab').classList.add('active');
        }

        function submitForm() {
            // Here you would normally send the data to a server
            console.log('Form data to be submitted:', formData);

            showToast('success', 'Application Submitted', 'Your insurance application has been submitted successfully!');

            // You would typically redirect to a confirmation page or show a success modal
            setTimeout(() => {
                alert('Form submitted successfully! Data: ' + JSON.stringify(formData, null, 2));
            }, 1000);
        }
        // Vehicle Data and Usage Functions
        function setTransmission(type) {
            const buttons = event.currentTarget.parentElement.querySelectorAll('.tab-button');
            buttons.forEach(btn => btn.classList.remove('active'));
            event.currentTarget.classList.add('active');
            formData.vehicle.transmission = type;
        }

        function setModifications(hasModifications) {
            const buttons = event.currentTarget.parentElement.querySelectorAll('.tab-button');
            buttons.forEach(btn => btn.classList.remove('active'));
            event.currentTarget.classList.add('active');
            formData.vehicle.modifications = hasModifications;
        }

        function setTrailer(hasTrailer) {
            const buttons = event.currentTarget.parentElement.querySelectorAll('.tab-button');
            buttons.forEach(btn => btn.classList.remove('active'));
            event.currentTarget.classList.add('active');
            formData.vehicle.trailer = hasTrailer;
        }

        function setKilometers(range) {
            const buttons = event.currentTarget.parentElement.querySelectorAll('.tab-button');
            buttons.forEach(btn => btn.classList.remove('active'));
            event.currentTarget.classList.add('active');
            formData.vehicle.kilometers = range;
        }

        function setRenew(willRenew) {
            const buttons = event.currentTarget.parentElement.querySelectorAll('.tab-button');
            buttons.forEach(btn => btn.classList.remove('active'));
            event.currentTarget.classList.add('active');
            formData.vehicle.renew = willRenew;
        }

        function setCoverage(age) {
            const buttons = event.currentTarget.parentElement.querySelectorAll('.tab-button');
            buttons.forEach(btn => btn.classList.remove('active'));
            event.currentTarget.classList.add('active');
            formData.vehicle.coverage = age;
        }

        // Engine Size Functions
        function incrementEngine() {
            const input = document.getElementById('engineSize');
            let value = parseInt(input.value) || 800;
            value += 100;
            input.value = value;
            formData.vehicle.engineSize = value;
        }

        function decrementEngine() {
            const input = document.getElementById('engineSize');
            let value = parseInt(input.value) || 800;
            if (value > 100) {
                value -= 100;
                input.value = value;
                formData.vehicle.engineSize = value;
            }
        }

        // City Dropdown Functions - FIXED VERSION
        function toggleCityDropdown() {
            const dropdown = document.getElementById('cityDisplay');
            const cities = [
                { flag: 'ðŸ‡©ðŸ‡¿', name: 'Algeria' },
                { flag: 'ðŸ‡¸ðŸ‡¦', name: 'Saudi Arabia' },
                { flag: 'ðŸ‡¦ðŸ‡ª', name: 'UAE' },
                { flag: 'ðŸ‡ªðŸ‡¬', name: 'Egypt' },
                { flag: 'ðŸ‡¯ðŸ‡´', name: 'Jordan' }
            ];

            // Create dropdown menu if it doesn't exist
            let menu = document.getElementById('cityDropdownMenu');
            if (!menu) {
                menu = document.createElement('div');
                menu.id = 'cityDropdownMenu';
                menu.className = 'dropdown-menu';
                menu.style.cssText = 'position: absolute; top: 100%; left: 0; right: 0; background: white; border: 1px solid #dfe6e9; border-radius: 6px; margin-top: 5px; z-index: 100; box-shadow: 0 4px 12px rgba(0,0,0,0.1); max-height: 250px; overflow-y: auto;';

                cities.forEach(city => {
                    const item = document.createElement('div');
                    item.style.cssText = 'padding: 12px 15px; cursor: pointer; display: flex; align-items: center; gap: 10px; border-bottom: 1px solid #f0f0f0;';
                    item.innerHTML = `<span style="font-size: 20px;">${city.flag}</span><span style="font-size: 14px; color: #2d3436;">${city.name}</span>`;
                    item.onclick = () => selectCity(city.flag, city.name);
                    menu.appendChild(item);
                });

                dropdown.parentElement.appendChild(menu);
            }

            menu.classList.toggle('active');
        }

        function selectCity(flag, name) {
            document.getElementById('cityDisplay').innerHTML = `
        <span class="city-flag">${flag}</span>
        <span class="city-name">${name}</span>
        <span class="dropdown-arrow">â–¼</span>
    `;
            document.getElementById('cityDropdownMenu').classList.remove('active');
            formData.vehicle.drivingCity = name;
        }

        function toggleWorkCityDropdown() {
            const dropdown = document.getElementById('workCityDisplay');
            const cities = [
                { flag: 'ðŸ‡©ðŸ‡¿', name: 'Algeria' },
                { flag: 'ðŸ‡¸ðŸ‡¦', name: 'Saudi Arabia' },
                { flag: 'ðŸ‡¦ðŸ‡ª', name: 'UAE' },
                { flag: 'ðŸ‡ªðŸ‡¬', name: 'Egypt' },
                { flag: 'ðŸ‡¯ðŸ‡´', name: 'Jordan' }
            ];

            // Create dropdown menu if it doesn't exist
            let menu = document.getElementById('workCityDropdownMenu');
            if (!menu) {
                menu = document.createElement('div');
                menu.id = 'workCityDropdownMenu';
                menu.className = 'dropdown-menu';
                menu.style.cssText = 'position: absolute; top: 100%; left: 0; right: 0; background: white; border: 1px solid #dfe6e9; border-radius: 6px; margin-top: 5px; z-index: 100; box-shadow: 0 4px 12px rgba(0,0,0,0.1); max-height: 250px; overflow-y: auto;';

                cities.forEach(city => {
                    const item = document.createElement('div');
                    item.style.cssText = 'padding: 12px 15px; cursor: pointer; display: flex; align-items: center; gap: 10px; border-bottom: 1px solid #f0f0f0;';
                    item.innerHTML = `<span style="font-size: 20px;">${city.flag}</span><span style="font-size: 14px; color: #2d3436;">${city.name}</span>`;
                    item.onclick = () => selectWorkCity(city.flag, city.name);
                    menu.appendChild(item);
                });

                dropdown.parentElement.appendChild(menu);
            }

            menu.classList.toggle('active');
        }

        function selectWorkCity(flag, name) {
            document.getElementById('workCityDisplay').innerHTML = `
        <span class="city-flag">${flag}</span>
        <span class="city-name">${name}</span>
        <span class="dropdown-arrow">â–¼</span>
    `;
            document.getElementById('workCityDropdownMenu').classList.remove('active');
            formData.vehicle.workCity = name;
        }

        // Safety Features Function
        function setFeature(featureType, hasFeature) {
            const buttons = event.currentTarget.parentElement.querySelectorAll('.tab-button');
            buttons.forEach(btn => btn.classList.remove('active'));
            event.currentTarget.classList.add('active');

            if (!formData.vehicle.safetyFeatures) {
                formData.vehicle.safetyFeatures = {};
            }
            formData.vehicle.safetyFeatures[featureType] = hasFeature;
        }
        // Initialize
        document.addEventListener('DOMContentLoaded', function () {
            // Load saved drivers from localStorage
            loadSavedDrivers();

            // Generate initial calendar for insurance date
            generateCalendar('insuranceDatePicker');

            // Initialize tab buttons
            document.querySelectorAll('.tab-buttons .tab-button').forEach(btn => {
                btn.addEventListener('click', function () {
                    this.parentElement.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                });
            });
        });
    </script>
</body>

</html>