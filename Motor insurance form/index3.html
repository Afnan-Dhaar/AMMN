<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    .ammn-support-carousel {
  padding: 80px 0;
  padding-left: 80px;
  background: #fff;
  overflow: hidden;
}

.ammn-support-viewport {
  width: 100%;
  position: relative;
  overflow: hidden;
}

.ammn-support-track {
  display: flex;
  gap: 32px;
  transition: transform 0.7s ease;
}

.ammn-support-slide {
  position: relative;
  flex: 0 0 90%;
  height: 380px;
  border-radius: 18px;
  overflow: hidden;
  background: #000;
}

.ammn-slide-bg {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.ammn-slide-content {
  position: relative;
  z-index: 2;
  max-width: 520px;
  padding: 40px;
  color: #fff;
}

.ammn-slide-content h3 {
  font-size: 26px;
  margin-bottom: 12px;
}

.ammn-slide-content p {
  font-size: 15px;
  opacity: 0.9;
  margin-bottom: 18px;
}

.ammn-slide-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-bottom: 20px;
}

.ammn-slide-tags span {
  background: rgba(255,255,255,0.15);
  padding: 6px 12px;
  border-radius: 999px;
  font-size: 13px;
}

.ammn-slide-cta {
  background: #fff;
  color: #000;
  border: none;
  padding: 12px 22px;
  border-radius: 999px;
  font-weight: 600;
  cursor: pointer;
}

/* CONTROLS */
.ammn-support-controls {
  position: absolute;
  right: 240px;
  bottom: 30px;
  display: flex;
  gap: 10px;
  z-index: 5;
}

.ammn-nav {
  width: 38px;
  height: 38px;
  border-radius: 50%;
  border: none;
  background: #fff;
  font-size: 20px;
  cursor: pointer;
}

/* DOTS */
.ammn-support-dots {
  position: absolute;
  top: 30px;
  right: 240px;
  display: flex;
  gap: 6px;
}

.ammn-support-dots span {
  width: 6px;
  height: 6px;
  background: rgba(255,255,255,0.4);
  border-radius: 50%;
}

.ammn-support-dots span.active {
  background: #fff;
}

  </style>
</head>
<body>
  <section class="ammn-support-carousel">
  <div class="ammn-support-viewport">

    <div class="ammn-support-track">

      <!-- SLIDE 1 -->
      <div class="ammn-support-slide">
        <img class="ammn-slide-bg" src="slide-1.jpg" alt="">
        <div class="ammn-slide-content">
          <h3>Need Support Beyond Policy Purchase?</h3>
          <p>AMMN is here to support you even after your insurance is issued.</p>

          <div class="ammn-slide-tags">
            <span>Policy guidance & follow-ups</span>
            <span>Document access & support</span>
            <span>Claim redirection & assistance</span>
            <span>Renewal reminders</span>
          </div>

          <button class="ammn-slide-cta">Get Post-Insurance Support</button>
        </div>
      </div>

      <!-- SLIDE 2 -->
      <div class="ammn-support-slide">
        <img class="ammn-slide-bg" src="slide-2.jpg" alt="">
        <div class="ammn-slide-content">
          <h3>Need Help Choosing the Right Insurance Partner?</h3>
          <p>AMMN experts guide you through coverage, pricing and benefits.</p>

          <div class="ammn-slide-tags">
            <span>Free insurance guidance</span>
            <span>Compare coverage clearly</span>
            <span>No obligation consultation</span>
          </div>

          <button class="ammn-slide-cta">Get Post-Insurance Support</button>
        </div>
      </div>

    </div>

    <!-- CONTROLS (FIXED POSITION) -->
    <div class="ammn-support-controls">
      <button class="ammn-nav prev">‹</button>
      <button class="ammn-nav next">›</button>
    </div>

    <!-- DOTS -->
    <div class="ammn-support-dots"></div>

  </div>
</section>

 <script>
  const track = document.querySelector('.ammn-support-track');
  const slides = Array.from(track.children);
  const dotsWrap = document.querySelector('.ammn-support-dots');
  const nextBtn = document.querySelector('.next');
  const prevBtn = document.querySelector('.prev');

  let index = 1;
  let isTransitioning = false;
  const slideGap = 32;

  // 1. CLONE FIRST AND LAST SLIDES
  const firstClone = slides[0].cloneNode(true);
  const lastClone = slides[slides.length - 1].cloneNode(true);

  track.prepend(lastClone);
  track.append(firstClone);

  const allSlides = Array.from(track.children);
  const realSlidesCount = slides.length;

  // 2. GENERATE DOTS
  for (let i = 0; i < realSlidesCount; i++) {
    const dot = document.createElement('span');
    if (i === 0) dot.classList.add('active');
    dotsWrap.append(dot);
  }
  const dots = dotsWrap.querySelectorAll('span');

  // 3. CORE MOVEMENT FUNCTION
  function updateCarousel(animate = true) {
    const slideWidth = slides[0].offsetWidth + slideGap;
    track.style.transition = animate ? 'transform 0.7s ease' : 'none';
    track.style.transform = `translateX(${-slideWidth * index}px)`;

    // Update Dots Logic
    dots.forEach(d => d.classList.remove('active'));
    let dotIndex = index - 1;
    if (index === 0) dotIndex = realSlidesCount - 1;
    if (index > realSlidesCount) dotIndex = 0;
    if (dots[dotIndex]) dots[dotIndex].classList.add('active');
  }

  // 4. INFINITE "JUMP" LOGIC
  track.addEventListener('transitionend', () => {
    isTransitioning = false;
    
    // If we are on the 'firstClone', jump back to the actual first slide
    if (index > realSlidesCount) {
      index = 1;
      updateCarousel(false);
    }
    
    // If we are on the 'lastClone', jump forward to the actual last slide
    if (index === 0) {
      index = realSlidesCount;
      updateCarousel(false);
    }
  });

  function moveNext() {
    if (isTransitioning) return;
    isTransitioning = true;
    index++;
    updateCarousel();
  }

  function movePrev() {
    if (isTransitioning) return;
    isTransitioning = true;
    index--;
    updateCarousel();
  }

  // 5. CONTROLS & AUTO-PLAY
  nextBtn.addEventListener('click', () => {
    moveNext();
    resetTimer();
  });

  prevBtn.addEventListener('click', () => {
    movePrev();
    resetTimer();
  });

  let autoPlay = setInterval(moveNext, 5000);

  function resetTimer() {
    clearInterval(autoPlay);
    autoPlay = setInterval(moveNext, 5000);
  }

  // 6. INITIALIZE & RESIZE SUPPORT
  window.addEventListener('resize', () => updateCarousel(false));
  
  // Set initial position without animation
  updateCarousel(false);
</script>


</body>
</html>